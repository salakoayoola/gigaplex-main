(self.webpackChunkcalendar=self.webpackChunkcalendar||[]).push([["src_utils_closestColor_js-src_utils_moment_js-src_utils_uidToColor_js-src_components_Editor_F-24b9af"],{27203:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var a=n(60649),o=n(49288),r=n(38680),s=n(76333),l=n(63774),d=n(41438),c=n(17668),i=n(28934),m=n(8772),u=n(95308),_=n(46911),p=n(44487),h=n(57096),y=n(69501),v=n(13779),g=n(41975),f=n(88336),b=n(22600),j=n(88730),C=n(51849),A=n(38679);const I={name:"FreeBusy",components:{NcSelect:s.EQ,FullCalendar:a.A,InviteesListSearch:g.A,NcDateTimePickerNative:s.c,NcDialog:s.i$,NcButton:s.x1,NcPopover:s.rI,NcUserBubble:s.Z9,ChevronRightIcon:p.A,ChevronLeftIcon:h.A,CheckIcon:y.A,HelpCircleIcon:v.A},props:{organizer:{type:Object,required:!0},attendees:{type:Array,required:!0},startDate:{type:Date,required:!0},endDate:{type:Date,required:!0},eventTitle:{type:String,default:""},alreadyInvitedEmails:{type:Array,default:()=>[]},dialogName:{type:String,required:!1},disableFindTime:{type:Boolean,default:!1}},data(){return{loadingIndicator:!0,currentDate:this.startDate,currentStart:this.startDate,currentEnd:this.endDate,lang:(0,m.S)().locale,formattingOptions:{weekday:"long",year:"numeric",month:"long",day:"numeric"},freeSlots:[],selectedSlot:null}},mounted(){this.$refs.freeBusyFullCalendar.getApi().scrollToTime(this.scrollTime),this.findFreeSlots()},computed:{...(0,C.aH)(A.A,{timezoneId:"getResolvedTimezone"}),...(0,C.aH)(A.A,["showWeekends","showWeekNumbers","timezone"]),placeholder(){return this.$t("calendar","Select automatic slot")},plugins:()=>[o.A,(0,u.A)(),_.A,r.Ay],formattedCurrentStart(){return this.currentDate.toLocaleDateString(this.lang,this.formattingOptions)},formattedCurrentTime(){const e={hour:"2-digit",minute:"2-digit",hour12:!0};return`${this.currentStart.toLocaleTimeString(this.lang,e)} - ${this.currentEnd.toLocaleTimeString(this.lang,e)} `},scrollTime(){return this.currentDate.getHours()>0?new Date(this.currentDate.getTime()-36e5).toLocaleTimeString(this.lang,{hour:"2-digit",minute:"2-digit",seconds:"2-digit",hour12:!1}):"10:00:00"},formattedTimeZone(){return this.timezoneId.replace("/","-")},eventSources(){return[(0,c.A)(this._uid,this.organizer.attendeeProperty,this.attendees.map((e=>e.attendeeProperty))),(0,d.A)(this._uid,this.resources,this.currentStart,this.currentEnd),(0,l.A)(this.organizer.attendeeProperty,this.attendees.map((e=>e.attendeeProperty)),this.resources)]},resources(){const e=[],t={CHAIR:this.$t("calendar","chairperson"),"REQ-PARTICIPANT":this.$t("calendar","required participant"),"NON-PARTICIPANT":this.$t("calendar","non-participant"),"OPT-PARTICIPANT":this.$t("calendar","optional participant")};for(const n of[this.organizer,...this.attendees]){let a=n.commonName||n.uri.slice(7);a=n===this.organizer?this.$t("calendar","{organizer} (organizer)",{organizer:a}):this.$t("calendar","{attendee} ({role})",{attendee:a,role:t[n.role]}),e.push({id:n.attendeeProperty.email,title:a})}return e.sort(((e,t)=>(e.id>t.id)-(e.id<t.id))),e},colorCaption(){return[{label:this.$t("calendar","Free"),color:(0,f.L)("FREE")},{label:this.$t("calendar","Busy (tentative)"),color:(0,f.L)("BUSY-TENTATIVE")},{label:this.$t("calendar","Busy"),color:(0,f.L)("BUSY")},{label:this.$t("calendar","Out of office"),color:(0,f.L)("BUSY-UNAVAILABLE")},{label:this.$t("calendar","Unknown"),color:(0,f.L)("UNKNOWN")}]},options(){return{initialView:"resourceTimelineDay",initialDate:this.currentStart,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",eventSources:this.eventSources,resources:this.resources,plugins:this.plugins,editable:!1,selectable:!0,select:this.handleSelect,...(0,i.W)(),...(0,m.S)(),height:"auto",loading:this.loading,headerToolbar:!1,resourceAreaColumns:[{field:"title",headerContent:"Attendees"}],timeZone:this.timezoneId,titleFormat:{month:"long",year:"numeric",day:"numeric",weekday:"long"},dateClick:this.findFreeSlots()}}},methods:{handleSelect(e){this.currentStart=e.start,this.currentEnd=e.end},save(){this.$emit("update-dates",{start:this.currentStart,end:this.currentEnd})},addAttendee(e){this.$emit("add-attendee",e),this.findFreeSlots()},removeAttendee(e){this.$emit("remove-attendee",e),this.findFreeSlots()},loading(e){this.loadingIndicator=e},handleActions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.$refs.freeBusyFullCalendar.getApi();switch(e){case"today":n.today();break;case"left":n.prev();break;case"right":n.next();break;case"picker":n.gotoDate(t)}this.currentDate=n.getDate(),n.scrollToTime(this.scrollTime),this.findFreeSlots()},async findFreeSlots(){if(this.currentStart.getDate()!==this.currentEnd.getDate())return;const e=new Date(this.currentStart);e.setDate(this.currentDate.getDate()),e.setMonth(this.currentDate.getMonth()),e.setYear(this.currentDate.getFullYear());const t=new Date(this.currentEnd);t.setDate(this.currentDate.getDate()),t.setMonth(this.currentDate.getMonth()),t.setYear(this.currentDate.getFullYear());try{const n=new Date(e);n.setDate(e.getDate()+8);const a=await(0,b.j)(this.organizer.attendeeProperty,this.attendees.map((e=>e.attendeeProperty)),e,n,this.timezoneId),o=(0,b.l)(e,t,a.events);o.forEach((e=>{e.displayStart=(0,j.A)(e.start,!1,(0,m.S)().locale)})),this.freeSlots=o}catch(e){throw console.error("Error occurred while finding free slots:",e),e}},setSlotSuggestion(e){this.selectedSlot=e;const t=this.$refs.freeBusyFullCalendar.getApi();t.gotoDate(e.start),t.scrollToTime(this.scrollTime),this.currentStart=e.start,this.currentEnd=e.end;const n=new Date(e.start);this.currentDate=new Date(n.setHours(0,0,0,0))}}}},63939:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(76333),o=n(28928),r=n(80502),s=n(52193),l=n(65043),d=n(17334),c=n.n(d),i=n(63814),m=n(89013),u=n(19425),_=n(85168),p=n(15745);const h={name:"InviteesListSearch",components:{Avatar:a.Bx,NcSelect:a.EQ,GoogleCirclesCommunitiesIcon:u.A},props:{alreadyInvitedEmails:{type:Array,required:!0},organizer:{type:Object,required:!1}},data:()=>({isLoading:!1,inputGiven:!1,matches:[],isCirclesEnabled:r.A}),computed:{placeholder(){return this.$t("calendar","Search for emails, users, contacts, teams or groups")},noResult(){return this.$t("calendar","No match found")}},methods:{findAttendees:c()((async function(e){this.isLoading=!0;const t=[];if(e.length>0){const n=[this.findAttendeesFromContactsAPI(e),this.findAttendeesFromDAV(e)];r.A&&n.push(this.findAttendeesFromCircles(e));const[a,o,s]=await Promise.all(n);t.push(...a),t.push(...o),r.A&&t.push(...s);if(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)){t.find((t=>t.email.toLowerCase()===e.toLowerCase()))||t.unshift({calendarUserType:"INDIVIDUAL",commonName:e,email:e,isUser:!1,avatar:null,language:null,timezoneId:null,hasMultipleEMails:!1,dropdownName:e})}for(const e of t)e.uid=(0,m.z)();this.isLoading=!1,this.inputGiven=!0}else this.inputGiven=!1,this.isLoading=!1;this.matches=t}),500),addAttendee(e){if("circle"===e.type&&((0,_.cf)(this.$t("calendar","Note that members of circles get invited but are not synced yet.")),this.resolveCircleMembers(e.id,e.email)),"contactsgroup"!==e.type)this.$emit("add-attendee",e);else{(0,_.cf)(this.$t("calendar","Note that members of contact groups get invited but are not synced yet.")),this.getContactGroupMembers(e.commonName);const t={calendarUserType:"GROUP",commonName:e.commonName,dropdownName:e.dropdownName,email:e.email,isUser:!1,subtitle:e.subtitle,type:"contactsgroup"};this.$emit("add-attendee",t)}},async resolveCircleMembers(e,t){let n;try{n=await(0,s.S)(e)}catch(e){return console.debug(e),[]}n.data.forEach((e=>{this.organizer&&e.email===this.organizer.uri||this.$emit("add-attendee",e)}))},async getContactGroupMembers(e){let t;try{t=await l.Ay.post((0,i.uM)("calendar","index.php")+"/v1/autocompletion/groupmembers",{groupName:e})}catch(e){return console.error("Failed to fetch contact group members",e),[]}t.data.forEach((e=>{this.organizer&&e.email===this.organizer.uri||this.$emit("add-attendee",e)}))},async findAttendeesFromContactsAPI(e){let t;try{t=await l.Ay.post((0,i.uM)("calendar","index.php")+"/v1/autocompletion/attendee",{search:e})}catch(e){return console.debug(e),[]}return t.data.reduce(((e,t)=>{const n=t.emails.length>1;return t.emails.forEach((a=>{let o;o=t.name&&!n?t.name:t.name&&n?`${t.name} (${a})`:a,a&&this.alreadyInvitedEmails.includes((0,p.nO)(a))||("contactsgroup"!==t.type?e.push({calendarUserType:"INDIVIDUAL",commonName:t.name,email:a,isUser:!1,avatar:t.photo,language:t.lang,timezoneId:t.tzid,hasMultipleEMails:n,dropdownName:o}):e.push({calendarUserType:"GROUP",commonName:t.name,subtitle:this.$n("calendar","%n member","%n members",t.members),members:{length:t.members},email:a,isUser:!1,avatar:t.photo,language:t.lang,timezoneId:t.tzid,hasMultipleEMails:!1,dropdownName:o,type:"contactsgroup"}))})),e}),[])},async findAttendeesFromDAV(e){let t;try{t=await(0,o.Ze)(e)}catch(e){return console.debug(e),[]}return t.filter((e=>!!e.email&&(!this.alreadyInvitedEmails.includes(e.email)&&!["ROOM","RESOURCE"].includes(e.calendarUserType)))).map((e=>({commonName:e.displayname,calendarUserType:e.calendarUserType,email:e.email,language:e.language,isUser:"INDIVIDUAL"===e.calendarUserType,avatar:decodeURIComponent(e.userId),hasMultipleEMails:!1,dropdownName:e.displayname?[e.displayname,e.email].join(" "):e.email})))},async findAttendeesFromCircles(e){let t;try{t=await(0,s.D)(e)}catch(e){return console.debug(e),[]}return t.filter((e=>!0)).map((e=>({commonName:e.displayname,calendarUserType:"GROUP",email:"circle+"+e.id+"@"+e.instance,isUser:!1,dropdownName:e.displayname,type:"circle",id:e.id,subtitle:this.$n("calendar","%n member","%n members",e.population)})))}}}},80500:(e,t,n)=>{"use strict";n.d(t,{X:()=>a,Y:()=>o});var a=function(){var e=this,t=e._self._c;return t("NcDialog",{attrs:{size:"large",name:e.dialogName||e.$t("calendar","Availability of attendees, resources and rooms")},on:{closing:function(t){return e.$emit("close")}}},[t("div",{staticClass:"modal__content modal--scheduler"},[e.loadingIndicator?t("div",{staticClass:"loading-indicator"},[t("div",{staticClass:"icon-loading"})]):e._e(),e._v(" "),t("div",{staticClass:"modal__content__header"},[t("h2",[e._v(e._s(e.$t("calendar","Find a time")))]),e._v(" "),t("h3",[e._v(e._s(e.eventTitle))]),e._v(" "),t("div",{staticClass:"modal__content__header__attendees"},[e._v("\n\t\t\t\t"+e._s(e.t("calendar","with"))+"\n\t\t\t\t"),t("NcUserBubble",{attrs:{size:"24","display-name":e.organizer.commonName}}),e._v(" "),e._l(e.attendees,(function(n){return t("NcUserBubble",{key:n.id,staticClass:"modal__content__header__attendees__user-bubble",attrs:{size:"24","display-name":n.commonName},scopedSlots:e._u([{key:"name",fn:function(){return[t("a",{staticClass:"icon-close",attrs:{href:"#",title:"Remove user"},on:{click:function(t){return e.removeAttendee(n)}}})]},proxy:!0}],null,!0)})}))],2)]),e._v(" "),t("div",{staticClass:"modal__content__actions"},[t("InviteesListSearch",{staticClass:"modal__content__actions__select",attrs:{"already-invited-emails":e.alreadyInvitedEmails,organizer:e.organizer},on:{"add-attendee":e.addAttendee}}),e._v(" "),t("div",{staticClass:"modal__content__actions__date"},[t("NcButton",{attrs:{type:"secondary"},on:{click:function(t){return e.handleActions("today")}}},[e._v("\n\t\t\t\t\t"+e._s(e.$t("calendar","Today"))+"\n\t\t\t\t")]),e._v(" "),t("NcButton",{attrs:{type:"secondary"},on:{click:function(t){return e.handleActions("left")}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("ChevronLeftIcon",{attrs:{size:20}})]},proxy:!0}])}),e._v(" "),t("NcButton",{attrs:{type:"secondary"},on:{click:function(t){return e.handleActions("right")}},scopedSlots:e._u([{key:"icon",fn:function(){return[t("ChevronRightIcon",{attrs:{size:20}})]},proxy:!0}])}),e._v(" "),t("NcDateTimePickerNative",{attrs:{"hide-label":!0,value:e.currentDate},on:{input:t=>e.handleActions("picker",t)}}),e._v(" "),t("NcPopover",{attrs:{"focus-trap":!1},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("NcButton",{attrs:{type:"tertiary-no-background"},scopedSlots:e._u([{key:"icon",fn:function(){return[t("HelpCircleIcon",{attrs:{size:20}})]},proxy:!0}])})]},proxy:!0}])},[e._v(" "),[t("div",{staticClass:"freebusy-caption"},[t("div",{staticClass:"freebusy-caption__calendar-user-types"}),e._v(" "),t("div",{staticClass:"freebusy-caption__colors"},e._l(e.colorCaption,(function(n){return t("div",{key:n.color,staticClass:"freebusy-caption-item"},[t("div",{staticClass:"freebusy-caption-item__color",style:{"background-color":n.color}}),e._v(" "),t("div",{staticClass:"freebusy-caption-item__label"},[e._v("\n\t\t\t\t\t\t\t\t\t\t"+e._s(n.label)+"\n\t\t\t\t\t\t\t\t\t")])])})),0)])]],2)],1)],1),e._v(" "),t("FullCalendar",{ref:"freeBusyFullCalendar",attrs:{options:e.options}}),e._v(" "),e.disableFindTime?e._e():t("div",{staticClass:"modal__content__footer"},[t("div",{staticClass:"modal__content__footer__title"},[e.freeSlots?t("p",[e._v("\n\t\t\t\t\t"+e._s(e.$t("calendar","Available times:"))+"\n\t\t\t\t\t"),t("NcSelect",{staticClass:"available-slots__multiselect",attrs:{options:e.freeSlots,placeholder:e.placeholder,clearable:!1,"input-id":"slot",label:"displayStart","label-outside":!0,value:e.selectedSlot},on:{"option:selected":e.setSlotSuggestion},scopedSlots:e._u([{key:"selected-option",fn:function(t){let{}=t;return[e._v("\n\t\t\t\t\t\t\t"+e._s(e.$t("calendar","Suggestion accepted"))+"\n\t\t\t\t\t\t")]}}],null,!1,1565055063)})],1):e._e(),e._v(" "),t("h3",[e._v("\n\t\t\t\t\t"+e._s(e.formattedCurrentStart)+"\n\t\t\t\t")]),e._v(" "),t("p",[e._v(e._s(e.formattedCurrentTime)),t("span",{staticClass:"modal__content__footer__title__timezone"},[e._v(e._s(e.formattedTimeZone))])])]),e._v(" "),t("NcButton",{attrs:{type:"primary"},on:{click:e.save},scopedSlots:e._u([{key:"icon",fn:function(){return[t("CheckIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2630571749)},[e._v("\n\t\t\t\t"+e._s(e.$t("calendar","Done"))+"\n\t\t\t\t")])],1)],1)])},o=[]},91498:(e,t,n)=>{"use strict";n.d(t,{X:()=>a,Y:()=>o});var a=function(){var e=this,t=e._self._c;return t("NcSelect",{staticClass:"invitees-search__multiselect",class:{showContent:e.inputGiven,"icon-loading":e.isLoading},attrs:{options:e.matches,searchable:!0,"max-height":600,placeholder:e.placeholder,clearable:!1,"label-outside":!0,"input-id":"uid",label:"dropdownName"},on:{search:e.findAttendees,"option:selected":e.addAttendee},scopedSlots:e._u([{key:"option",fn:function(n){return[t("div",{staticClass:"invitees-search-list-item"},[n.isUser?t("Avatar",{key:n.uid,attrs:{user:n.avatar,"display-name":n.dropdownName}}):"circle"===n.type?t("Avatar",{scopedSlots:e._u([{key:"icon",fn:function(){return[t("GoogleCirclesCommunitiesIcon",{attrs:{size:20}})]},proxy:!0}],null,!0)}):e._e(),e._v(" "),n.isUser||"circle"===n.type?e._e():t("Avatar",{key:n.uid,attrs:{url:n.avatar,"display-name":n.commonName}}),e._v(" "),t("div",{staticClass:"invitees-search-list-item__label"},[t("div",[e._v("\n\t\t\t\t\t"+e._s(n.commonName)+"\n\t\t\t\t")]),e._v(" "),n.email!==n.commonName&&"circle"!==n.type&&"contactsgroup"!==n.type?t("div",[e._v("\n\t\t\t\t\t"+e._s(n.email)+"\n\t\t\t\t")]):e._e(),e._v(" "),"circle"===n.type||"contactsgroup"===n.type?t("div",[e._v("\n\t\t\t\t\t"+e._s(n.subtitle)+"\n\t\t\t\t")]):e._e()])],1)]}}])})},o=[]},88730:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(51651);const o=(e,t,n)=>t?(0,a.A)(e).locale(n).format("ll"):(0,a.A)(e).locale(n).format("lll")},63774:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(62863),o=n(88075),r=n(53216),s=n(88336);function l(e,t,n){const l=n.map((e=>e.id));return{id:"free-busy-free-for-all",editable:!1,startEditable:!1,durationEditable:!1,resourceEditable:!1,events:async(n,d,c)=>{let{start:i,end:m,timeZone:u}=n;console.debug("freeBusyBlockedForAllEventSource",i,m,u);let _=(0,a.A)().getTimezoneForId(u);_||(_=(0,a.A)().getTimezoneForId("UTC"),r.Ay.error(`FreeBusyEventSource: Timezone ${u} not found, falling back to UTC.`));const p=o.Z4.fromJSDate(i,!0),h=o.Z4.fromJSDate(m,!0),y=new o.Uy("ATTENDEE",e.email),v=await(0,s.s)(p,h,e,[y,...t]),g=[];for await(const[,e]of v)g.push({start:e.getFirstValue().start.getInTimezone(_).jsDate,end:e.getFirstValue().end.getInTimezone(_).jsDate});g.sort(((e,t)=>e.start-t.start));const f=[];if(g.length){let e=g[0].start;g.forEach((t=>{const n=function(e,t){const n=e.filter((e=>e.start>=t)).reduce(((e,t)=>t.start<e.start||t.end<=e.end||t.start>e.end?e:{start:e.start,end:t.end}),{start:t,end:t});if(n.start===n.end)return;return n}(g,e)??t;n.start<e||(f.push(n),e=n.end)}))}console.debug("deduplicated slots",g,f);const b=f.map((e=>({groupId:"free-busy-blocked-for-all",start:e.start.toISOString(),end:e.end.toISOString(),resourceIds:l,display:"background",allDay:!1,backgroundColor:"var(--color-text-maxcontrast)",borderColor:"var(--color-text-maxcontrast)"})));console.debug("freeBusyBlockedForAllEventSource",g,b),d(b)}}}},41438:(e,t,n)=>{"use strict";function a(e,t,n,a){const o=t.map((e=>e.id));return{id:"free-busy-fake-blocking-event-source-"+e,editable:!1,startEditable:!1,durationEditable:!1,resourceEditable:!1,events:async(e,r,s)=>{let{start:l,end:d,timeZone:c}=e;1===t.length?r([{id:Math.random().toString(36).substring(7),start:n.toISOString(),end:a.toISOString(),allDay:!1,display:"background",classNames:["blocking-event-free-busy","blocking-event-free-busy--first-row","blocking-event-free-busy--last-row"],resourceId:o[0]}]):2===t.length?r([{id:Math.random().toString(36).substring(7),start:n.toISOString(),end:a.toISOString(),allDay:!1,display:"background",classNames:["blocking-event-free-busy","blocking-event-free-busy--first-row"],resourceId:o[0]},{id:Math.random().toString(36).substring(7),start:n.toISOString(),end:a.toISOString(),allDay:!1,display:"background",classNames:["blocking-event-free-busy","blocking-event-free-busy--last-row"],resourceId:o[1]}]):r([{id:Math.random().toString(36).substring(7),start:n.toISOString(),end:a.toISOString(),allDay:!1,display:"background",classNames:["blocking-event-free-busy","blocking-event-free-busy--first-row"],resourceIds:o.slice(0,1)},{id:Math.random().toString(36).substring(7),start:n.toISOString(),end:a.toISOString(),allDay:!1,display:"background",classNames:["blocking-event-free-busy"],resourceIds:o.slice(1,-1)},{id:Math.random().toString(36).substring(7),start:n.toISOString(),end:a.toISOString(),allDay:!1,display:"background",classNames:["blocking-event-free-busy","blocking-event-free-busy--last-row"],resourceIds:o.slice(-1)}])}}}n.d(t,{A:()=>a})},17668:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(88075);var a=n(22600);function o(e,t,n){return{id:"free-busy-event-source-"+e,editable:!1,startEditable:!1,durationEditable:!1,resourceEditable:!1,events:async(e,o,r)=>{let{start:s,end:l,timeZone:d}=e;const c=await(0,a.j)(t,n,s,l,d);c.error?r(c.error):o(c.events)}}}},20356:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(88336),o=n(88075);function r(e,t,n,r,s,l){if(!n)return[{id:Math.random().toString(36).substring(7),start:r.getInTimezone(l).jsDate.toISOString(),end:s.getInTimezone(l).jsDate.toISOString(),resourceId:e,display:"background",allDay:!1,backgroundColor:(0,a.L)("UNKNOWN"),borderColor:(0,a.L)("UNKNOWN")}];const d=(0,o.zc)().getParserForFileType("text/calendar");d.parse(t);const c=d._calendarComponent.getFirstComponent("VFREEBUSY");if(!c)return[];const i=[];for(const t of c.getPropertyIterator("FREEBUSY"))i.push({id:Math.random().toString(36).substring(7),start:t.getFirstValue().start.getInTimezone(l).jsDate.toISOString(),end:t.getFirstValue().end.getInTimezone(l).jsDate.toISOString(),resourceId:e,display:"background",classNames:["free-busy-block","free-busy-"+t.type.toLowerCase()],backgroundColor:(0,a.L)(t.type)});return i}},28934:(e,t,n)=>{"use strict";n.d(t,{W:()=>a});const a=()=>{const e={dayHeaderFormat:"ddd l",titleFormat:"ll",slotLabelFormat:"LT"};return{eventTimeFormat:"LT",views:{dayGridMonth:{...e,dayHeaderFormat:"ddd"},multiMonthYear:{...e,dayHeaderFormat:"ddd",multiMonthMaxColumns:4},timeGridDay:e,timeGridWeek:e,listMonth:{listDayFormat:"LL, dddd",listDaySideFormat:!1},resourceTimelineDay:e}}}},8772:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var a=n(53334);const o=()=>({firstDay:(0,a.JN)(),locale:(0,a.Z0)(),weekText:(0,a.Tl)("calendar","W"),allDayText:(0,a.Tl)("calendar","All day"),moreLinkText:e=>(0,a.Tl)("calendar","%n more",{},e),noEventsText:(0,a.Tl)("calendar","No events to display")})},95308:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(51651),o=n(67363),r=n(38679);const s=e=>{let{array:t}=e;const n=(0,r.A)();return(0,a.A)(t).locale(n.momentLocale)},l=()=>(e,t)=>{if(t.end){const n=s(t.start).format(e),a=s(t.end).format(e);return n===a?n:n+t.defaultSeparator+a}return s(t.start).format(e)};function d(){return(0,o.i1)({name:"@nextcloud/moment-plugin",cmdFormatter:l()})}},46911:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(67363),o=n(29174),r=n(62863),s=n(53216);class l extends o.by{offsetForArray(e){let[t,n,a,o,l,d]=e,c=(0,r.A)().getTimezoneForId(this.timeZoneName);return c||(c=(0,r.A)().getTimezoneForId("UTC"),s.Ay.error(`VTimezoneNamedTimezoneImpl: Timezone ${this.timeZoneName} not found, falling back to UTC.`)),n+=1,c.offsetForArray(t,n,a,o,l,d)/60}timestampToArray(e){let t=(0,r.A)().getTimezoneForId(this.timeZoneName);t||(t=(0,r.A)().getTimezoneForId("UTC"),s.Ay.error(`VTimezoneNamedTimezoneImpl: Timezone ${this.timeZoneName} not found, falling back to UTC.`));const n=t.timestampToArray(e);return n[1]--,n}}const d=(0,a.i1)({name:"@nextcloud/v-timezone-named-timezone-plugin",namedTimeZonedImpl:l})},16126:(e,t,n)=>{"use strict";n.d(t,{t:()=>s,B:()=>l});var a=n(88484),o=n(35442);const r=e=>{const t=btoa(encodeURI(e.href));let n;n=e["common-name"]&&""!==e["common-name"].trim()?e["common-name"]:e.href.startsWith(o._l)?decodeURIComponent(e.href.slice(28)):e.href.startsWith(o.mI)?decodeURIComponent(e.href.slice(27)):e.href;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{id:null,displayName:null,writeable:!1,isUser:!1,isGroup:!1,isCircle:!1,uri:null},e)}({id:t,displayName:n,writeable:e.access[0].endsWith("read-write"),isUser:e.href.startsWith(o.mI),isGroup:e.href.startsWith(o._l),isCircle:e.href.startsWith(o.fM),uri:e.href})},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{id:"",displayName:"",color:(0,a.GM)(""),enabled:!0,loading:!1,supportsEvents:!0,supportsJournals:!1,supportsTasks:!1,owner:"",timezone:null,shares:[],publishURL:null,url:"",readOnly:!1,order:0,isSharedWithMe:!1,canBeShared:!1,canBePublished:!1,dav:!1,calendarObjects:[],fetchedTimeRanges:[],transparency:"opaque"},e)},l=(e,t)=>{const n=btoa(e.url),o=e.displayname||function(e){e.endsWith("/")&&(e=e.substring(0,e.length-1));return e.substring(e.lastIndexOf("/")+1)}(e.url);let l=(0,a.nJ)(e.color);l||(l=(0,a.GM)(o));const d=e.components.includes("VEVENT"),c=e.components.includes("VJOURNAL"),i=e.components.includes("VTODO"),m=e.owner,u=!e.isWriteable(),_=e.isShareable(),p=e.isPublishable(),h=e.order||0,y=e.url,v=e.publishURL||null,g=e.timezone||null,f=e.transparency||"opaque";let b,j=!1;j=!t||m!==t.url,t?"boolean"==typeof e.enabled?b=e.enabled:(b=!0,e.enabled=!0):b=!0;const C=[];if(t&&Array.isArray(e.shares))for(const n of e.shares)n.href!==t.principalScheme&&C.push(r(n));return s({id:n,displayName:o,color:l,order:h,url:y,enabled:b,supportsEvents:d,supportsJournals:c,supportsTasks:i,isSharedWithMe:j,owner:m,readOnly:u,publishURL:v,canBeShared:_,canBePublished:p,shares:C,timezone:g,transparency:f,dav:e})}},26620:(e,t,n)=>{"use strict";n.d(t,{ON:()=>s,cr:()=>l});var a=n(88075),o=n(35442);const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{id:null,calendarId:null,dav:null,calendarComponent:null,uid:null,uri:null,objectType:null,isEvent:!1,isJournal:!1,isTodo:!1,existsOnServer:!1},e)},s=(e,t)=>{const n=(0,a.zc)().getParserForFileType("text/calendar");if("string"!=typeof e.data||""===e.data.trim())throw new Error("Empty calendar object");n.parse(e.data);const s=n.getItemIterator().next().value;if(!s)throw new Error("Empty calendar object");const l=s.getVObjectIterator().next().value;return r({id:btoa(e.url),calendarId:t,dav:e,calendarComponent:s,uid:l.uid,uri:e.url,objectType:l.name,isEvent:l.name===o.P$,isJournal:l.name===o.W5,isTodo:l.name===o.vC,existsOnServer:!0})},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e.getVObjectIterator().next().value;if(!n)throw new Error("Calendar object without vobjects");return r({calendarId:t,calendarComponent:e,uid:n.uid,objectType:n.name,isEvent:n.name===o.P$,isJournal:n.name===o.W5,isTodo:n.name===o.vC})}},7051:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var a=n(53334);function o(){return[(0,a.Tl)("calendar","Anniversary"),(0,a.Tl)("calendar","Appointment"),(0,a.Tl)("calendar","Business"),(0,a.Tl)("calendar","Education"),(0,a.Tl)("calendar","Holiday"),(0,a.Tl)("calendar","Meeting"),(0,a.Tl)("calendar","Miscellaneous"),(0,a.Tl)("calendar","Non-working hours"),(0,a.Tl)("calendar","Not in office"),(0,a.Tl)("calendar","Personal"),(0,a.Tl)("calendar","Phone call"),(0,a.Tl)("calendar","Sick day"),(0,a.Tl)("calendar","Special occasion"),(0,a.Tl)("calendar","Travel"),(0,a.Tl)("calendar","Vacation")].map((e=>({value:e,label:e})))}const r=()=>({accessClass:{readableName:(0,a.Tl)("calendar","When shared show"),icon:"Eye",options:[{value:"PUBLIC",label:(0,a.Tl)("calendar","When shared show full event")},{value:"CONFIDENTIAL",label:(0,a.Tl)("calendar","When shared show only busy")},{value:"PRIVATE",label:(0,a.Tl)("calendar","When shared hide this event")}],multiple:!1,info:(0,a.Tl)("calendar","The visibility of this event in shared calendars."),defaultValue:"PUBLIC"},location:{readableName:(0,a.Tl)("calendar","Location"),placeholder:(0,a.Tl)("calendar","Add a location"),icon:"MapMarker"},description:{readableName:(0,a.Tl)("calendar","Description"),placeholder:(0,a.Tl)("calendar","Add a description\n\n- What is this meeting about\n- Agenda items\n- Anything participants need to prepare"),icon:"TextBoxOutline",defaultNumberOfRows:2},status:{readableName:(0,a.Tl)("calendar","Status"),icon:"Check",options:[{value:"CONFIRMED",label:(0,a.Tl)("calendar","Confirmed")},{value:"TENTATIVE",label:(0,a.Tl)("calendar","Tentative")},{value:"CANCELLED",label:(0,a.Tl)("calendar","Canceled")}],multiple:!1,info:(0,a.Tl)("calendar","Confirmation about the overall status of the event."),defaultValue:"CONFIRMED"},timeTransparency:{readableName:(0,a.Tl)("calendar","Show as"),icon:"Briefcase",multiple:!1,info:(0,a.Tl)("calendar","Take this event into account when calculating free-busy information."),options:[{value:"TRANSPARENT",label:(0,a.Tl)("calendar","Free")},{value:"OPAQUE",label:(0,a.Tl)("calendar","Busy")}],defaultValue:"TRANSPARENT"},categories:{readableName:(0,a.Tl)("calendar","Categories"),icon:"Tag",multiple:!0,info:(0,a.Tl)("calendar","Categories help you to structure and organize your events."),placeholder:(0,a.Tl)("calendar","Search or add categories"),tagPlaceholder:(0,a.Tl)("calendar","Add this as a new category"),options:o()},color:{readableName:(0,a.Tl)("calendar","Custom color"),icon:"EyedropperVariant",multiple:!1,info:(0,a.Tl)("calendar","Special color of this event. Overrides the calendar-color.")}})},38213:(e,t,n)=>{"use strict";n.d(t,{vV:()=>d});var a=n(65043),o=n(63814),r=n(85168),s=n(53334),l=n(44719);const d=async function(e,t){const n=(0,o.dC)(`dav/files/${t}/${e}`);try{await(0,a.Ay)({method:"MKCOL",url:n})}catch(n){if(405!==n?.response?.status)return(0,r.Qg)((0,s.Tl)("calendar","Error creating a folder {folder}",{folder:e})),e;"/"!==e&&(e=await c(e,t))}return e},c=async function(e,t){const n=await i(e,t),a=await(0,l.h4)(n),o=a?.multistatus?.response[0]?.propstat?.prop?.["mount-type"];if("shared"!==o)return e;const r=e.split("/");return r.pop(),1===r.length?"/":c(r.join("/"),t)},i=async function(e,t){const n=(0,o.dC)(`dav/files/${t}/${e}`);return(await(0,a.Ay)({method:"PROPFIND",url:n,data:'<?xml version="1.0"?>\n\t\t\t<d:propfind\n\t\t\txmlns:d="DAV:"\n\t\t\txmlns:oc="http://owncloud.org/ns"\n\t\t\txmlns:nc="http://nextcloud.org/ns">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<d:getcontenttype />\n\t\t\t\t\t<oc:size />\n\t\t\t\t\t<oc:fileid />\n\t\t\t\t\t<oc:share-types />\n\t\t\t\t\t<nc:has-preview />\n\t\t\t\t\t<nc:mount-type />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>'}).catch((()=>{(0,r.Qg)((0,s.Tl)("calendar","An error occurred during getting file information"))}))).data}},52193:(e,t,n)=>{"use strict";n.d(t,{D:()=>r,S:()=>s});var a=n(65043),o=n(63814);const r=async e=>{let t;try{t=await a.Ay.get((0,o.KT)("apps/files_sharing/api/v1/")+"sharees",{params:{format:"json",search:e,perPage:200,itemType:"pringroucipals"}})}catch(e){return[]}if("failure"===t.data.ocs.meta.status)return[];let n=[];return Array.isArray(t.data.ocs.data.circles)&&(n=n.concat(t.data.ocs.data.circles)),Array.isArray(t.data.ocs.data.exact.circles)&&(n=n.concat(t.data.ocs.data.exact.circles)),0===n.length?[]:n.filter((e=>!0)).map((e=>({displayname:e.label,population:e.value.circle.population,id:e.value.circle.id,instance:e.value.circle.owner.instance})))},s=async e=>{let t;try{t=await a.Ay.get((0,o.uM)("calendar","index.php")+"/v1/circles/getmembers",{params:{format:"json",circleId:e}})}catch(e){return console.debug(e),[]}return t}},22600:(e,t,n)=>{"use strict";n.d(t,{j:()=>c,l:()=>i});var a=n(88075),o=n(28928),r=n(20356),s=n(62863),l=n(53216);const d=7;async function c(e,t,n,d,c){const i=new Date(n.getTime());i.setDate(i.getDate()-1);let m=(0,s.A)().getTimezoneForId(c);m||(m=(0,s.A)().getTimezoneForId("UTC"),l.Ay.error(`FreeBusyEventSource: Timezone ${c} not found, falling back to UTC.`));const u=a.Z4.fromJSDate(i,!0),_=a.Z4.fromJSDate(d,!0),p=new a.Uy("ATTENDEE",e.email),h=(0,a.TA)(u,_,e,[p,...t]).toICS();let y,v;try{y=await(0,o.hC)()}catch(e){return{error:e}}try{v=await y.freeBusyRequest(h)}catch(e){return{error:e}}const g=[];for(const[e,t]of Object.entries(v))g.push(...(0,r.A)(e,t.calendarData,t.success,u,_,m));return{events:g}}function i(e,t,n){let a=function(e,t){const n=new Date(e).toUTCString(),a=new Date(t).toUTCString(),o=new Date(a)-new Date(n);return Math.floor(o/1e3)}(e,t);0===a&&(a=86400);if(new Date(e).setDate(e.getDate()+d),n.error)return[{error:n.error}];let o=function(e){const t=new Map;for(const n of e){const e=n.start.toString()+n.end.toString();t.has(e)||t.set(e,n)}return Array.from(t.values()).sort(((e,t)=>new Date(e.start)-new Date(t.start)))}(n);o=o.filter((function(t){return new Date(e)<new Date(t.end)}));const r=[];for(let e=0;e<o.length;e++){const t=m(new Date(o[e].end),a,o);t&&r.push(t)}const s=m(new Date(e),a,o,!1,!1);return s&&r.unshift(s),r}function m(e,t,n){let a=!0;(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&(e=function(e){e.getMinutes()%15==0&&e.setMinutes(e.getMinutes()+1);const t=15*Math.ceil(e.getMinutes()/15);return e.setMinutes(t),e.setSeconds(0),e.setMilliseconds(0),e}(e));const o=new Date(e);return o.setSeconds(e.getSeconds()+t),n.every((t=>{const n=new Date(t.start),r=new Date(t.end);return n>=e&&n<=o||r>=e&&r<=o?(a=!1,!1):!(n<=e&&r>=o)||(a=!1,!1)})),!!a&&{start:e,end:o}}},80502:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(32981).C)("calendar","isCirclesEnabled",!1)},62863:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const a=(0,n(62297).ZR)();let o=!1;function r(){return o||(a.registerDefaultTimezones(),o=!0),a}},87133:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});var a=n(63032),o=n.n(a);const r=()=>{const e=o().determine();if(!e)return"UTC";const t=e.name();return t||"UTC"}},2023:(e,t,n)=>{"use strict";n.d(t,{A:()=>V});var a=n(62863),o=n(77555),r=n(88075);function s(e){switch(e.getDay()){case 0:return"SU";case 1:return"MO";case 2:return"TU";case 3:return"WE";case 4:return"TH";case 5:return"FR";case 6:return"SA";default:throw TypeError("Invalid date-object given")}}var l=n(88484),d=n(74717);const c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{alarmComponent:null,type:null,isRelative:!1,absoluteDate:null,absoluteTimezoneId:null,relativeIsBefore:null,relativeIsRelatedToStart:null,relativeUnitTimed:null,relativeAmountTimed:null,relativeUnitAllDay:null,relativeAmountAllDay:null,relativeHoursAllDay:null,relativeMinutesAllDay:null,relativeTrigger:null},e)},i=e=>{if(e.trigger.isRelative()){const t=e.trigger.value.isNegative,n="START"===e.trigger.related,{amount:a,unit:o}=(0,d.R2)(e.trigger.value.totalSeconds),{unit:r,amount:s,hours:l,minutes:i}=(0,d.rG)(e.trigger.value.totalSeconds),m=e.trigger.value.totalSeconds;return c({alarmComponent:e,type:e.action,isRelative:e.trigger.isRelative(),relativeIsBefore:t,relativeIsRelatedToStart:n,relativeUnitTimed:o,relativeAmountTimed:a,relativeUnitAllDay:r,relativeAmountAllDay:s,relativeHoursAllDay:l,relativeMinutesAllDay:i,relativeTrigger:m})}{const t=(0,o.z8)(e.trigger.value);return c({alarmComponent:e,type:e.action,isRelative:e.trigger.isRelative(),absoluteDate:t,absoluteTimezoneId:e.trigger.value.timezoneId})}};var m=n(58196);const u=e=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{attachmentProperty:null,fileName:null,formatType:null,uri:null,value:null,xNcHasPreview:null,xNcFileId:null},e)}({attachmentProperty:e,fileName:e.getParameterFirstValue("FILENAME"),formatType:e.formatType,uri:e.uri,value:e.value,xNcHasPreview:"true"===e.getParameterFirstValue("X-NC-HAS-PREVIEW"),xNcFileId:e.getParameterFirstValue("X-NC-FILE-ID")}),_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{recurrenceRuleValue:null,frequency:"NONE",interval:1,count:null,until:null,byDay:[],byMonth:[],byMonthDay:[],bySetPosition:null,isUnsupported:!1},e)},p=["BYSECOND","BYMINUTE","BYHOUR","BYDAY","BYMONTHDAY","BYYEARDAY","BYWEEKNO","BYMONTH","BYSETPOS"],h=["BYSECOND","BYMINUTE","BYHOUR","BYMONTHDAY","BYYEARDAY","BYWEEKNO","BYMONTH","BYSETPOS"],y=["BYSECOND","BYMINUTE","BYHOUR","BYYEARDAY","BYWEEKNO","BYMONTH"],v=["BYSECOND","BYMINUTE","BYHOUR","BYMONTHDAY","BYYEARDAY","BYWEEKNO"],g=["SU","MO","TU","WE","TH","FR","SA"],f=(e,t)=>Array.apply(null,Array(t-e+1)).map(((t,n)=>n+e)).map((e=>e.toString())),b=f(1,31),j=f(1,12),C=e=>{const t=R(e,p);return S(e,{isUnsupported:t})},A=(e,t)=>{const n=R(e,h),a=e.getComponent("BYDAY").some((e=>!g.includes(e))),o=n||a,r=e.getComponent("BYDAY").filter((e=>g.includes(e)));return 0===r.length&&r.push(s(t.jsDate)),S(e,{byDay:r,isUnsupported:o})},I=(e,t)=>{let n=R(e,y),a=[],o=null,r=[];if(R(e,["BYMONTHDAY"])){R(e,["BYDAY","BYSETPOS"])&&(n=!0);const t=e.getComponent("BYMONTHDAY").some((e=>!b.includes(e.toString())));n=n||t,r=e.getComponent("BYMONTHDAY").filter((e=>b.includes(e.toString()))).map((e=>e.toString()))}else if(R(e,["BYDAY"])&&R(e,["BYSETPOS"])){D(e.getComponent("BYDAY"))?a=e.getComponent("BYDAY"):(a=["MO","TU","WE","TH","FR","SA","SU"],n=!0);const t=e.getComponent("BYSETPOS");1===t.length&&O(t[0])?o=t[0]:(o=1,n=!0)}else if(R(e,["BYDAY"])){const s=e.getComponent("BYDAY");if(s.length>1)r.push(t.day.toString()),n=!0;else{const e=s[0],l=/^(-?\d)([A-Z]{2})$/.exec(e);if(l){const e=l[1],t=l[2];O(e)?(a=[t],o=parseInt(e,10)):(a=[t],o=1,n=!0)}else r.push(t.day.toString()),n=!0}}else r.push(t.day.toString());return S(e,{byDay:a,bySetPosition:o,byMonthDay:r,isUnsupported:n})},T=(e,t)=>{let n=R(e,v),a=[],o=null,r=[];if(R(e,["BYMONTH"])){const t=e.getComponent("BYMONTH").some((e=>!j.includes(e.toString())));n=n||t,r=e.getComponent("BYMONTH").filter((e=>j.includes(e.toString()))).map((e=>e.toString()))}else r.push(t.month.toString());if(R(e,["BYDAY"])&&R(e,["BYSETPOS"])){D(e.getComponent("BYDAY"))?a=e.getComponent("BYDAY"):(a=["MO","TU","WE","TH","FR","SA","SU"],n=!0);const t=e.getComponent("BYSETPOS");1===t.length&&O(t[0])?o=t[0]:(o=1,n=!0)}else if(R(e,["BYDAY"])){const t=e.getComponent("BYDAY");if(t.length>1)n=!0;else{const e=t[0],r=/^(-?\d)([A-Z]{2})$/.exec(e);if(r){const e=r[1],t=r[2];O(e)?(a=[t],o=parseInt(e,10)):(a=[t],o=1,n=!0)}else n=!0}}return S(e,{byDay:a,bySetPosition:o,byMonth:r,isUnsupported:n})},D=e=>["MO","TU","WE","TH","FR","SA","SU","FR,MO,SA,SU,TH,TU,WE","FR,MO,TH,TU,WE","SA,SU"].includes(e.slice().sort().join(",")),O=e=>["-2","-1","1","2","3","4","5"].includes(e.toString()),R=(e,t)=>{for(const n of t){if(e.getComponent(n).length>0)return!0}return!1},S=(e,t)=>{const n=null!==e.count&&null!==e.until;let a={};return n&&(a={isUnsupported:n}),_(Object.assign({},{recurrenceRuleValue:e,frequency:e.frequency,interval:parseInt(e.interval,10)||1,count:e.count,until:e.until?(0,o.z8)(e.until):null},t,a))},z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},{eventComponent:null,title:null,startDate:null,startTimezoneId:null,endDate:null,endTimezoneId:null,isAllDay:!1,canModifyAllDay:!0,location:null,description:null,accessClass:null,status:null,timeTransparency:null,recurrenceRule:_(),hasMultipleRRules:!1,isMasterItem:!1,isRecurrenceException:!1,forceThisAndAllFuture:!1,canCreateRecurrenceException:!1,attendees:[],organizer:null,alarms:[],customColor:null,categories:[],attachments:[]},e)},w=e=>{const t=z({eventComponent:e,title:e.title,isAllDay:e.isAllDay(),canModifyAllDay:e.canModifyAllDay(),location:e.location,description:e.description,accessClass:e.accessClass,status:e.status,timeTransparency:e.timeTransparency,categories:Array.from(e.getCategoryIterator()),isMasterItem:e.isMasterItem(),isRecurrenceException:e.isRecurrenceException(),canCreateRecurrenceException:e.canCreateRecurrenceExceptions()});if(t.startDate=(0,o.z8)(e.startDate),t.startTimezoneId=e.startDate.timezoneId,e.isAllDay()){const n=e.endDate.clone();n.addDuration(r.wy.fromSeconds(-86400)),t.endDate=(0,o.z8)(n)}else t.endDate=(0,o.z8)(e.endDate);if(t.endTimezoneId=e.endDate.timezoneId,e.organizer){const n=e.getFirstProperty("ORGANIZER");t.organizer={commonName:n.commonName,uri:n.email,attendeeProperty:n}}for(const n of e.getAlarmIterator())t.alarms.push(i(n));for(const n of e.getAttendeeIterator())t.attendees.push((0,m.Wj)(n));for(const n of e.getPropertyIterator("ATTACH"))t.attachments.push(u(n));const n=e.getPropertyIterator("RRULE"),a=n.next().value;if(a&&(t.recurrenceRule=((e,t)=>{switch(e.frequency){case"DAILY":return C(e);case"WEEKLY":return A(e,t);case"MONTHLY":return I(e,t);case"YEARLY":return T(e,t);default:return S(e,{isUnsupported:!0})}})(a.getFirstValue(),e.startDate),t.hasMultipleRRules=!n.next().done),e.hasProperty("COLOR")){const n=(0,l.dU)(e.getFirstPropertyFirstValue("COLOR"));null!==n&&(t.customColor=n)}return t};var E=n(67982),N=n(53216),B=n(7051),M=n(63814),F=n(81895),P=n(46305),k=n(6088),U=n(38679),x=n(51849),Y=n(85471);const V=(0,x.nY)("calendarObjectInstance",{state:()=>({isNew:null,calendarObject:null,calendarObjectInstance:null,existingEvent:{objectId:null,recurrenceId:null}}),actions:{setCalendarObjectInstanceForExistingEvent(e){let{calendarObject:t,calendarObjectInstance:n,objectId:a,recurrenceId:o}=e;this.isNew=!1,this.calendarObject=t,this.calendarObjectInstance=n,this.existingEvent.objectId=a,this.existingEvent.recurrenceId=o},setCalendarObjectInstanceForNewEvent(e){let{calendarObject:t,calendarObjectInstance:n}=e;this.isNew=!0,this.calendarObject=t,this.calendarObjectInstance=n,this.existingEvent.objectId=null,this.existingEvent.recurrenceId=null},resetCalendarObjectInstanceObjectIdAndRecurrenceId(){this.isNew=!1,this.calendarObject=null,this.calendarObjectInstance=null,this.existingEvent.objectId=null,this.existingEvent.recurrenceId=null},changeTitle(e){let{calendarObjectInstance:t,title:n}=e;t.eventComponent.title=n,t.title=n},changeStartDateMutation(e){let{calendarObjectInstance:t,startDate:n}=e;t.eventComponent.startDate.year=n.getFullYear(),t.eventComponent.startDate.month=n.getMonth()+1,t.eventComponent.startDate.day=n.getDate(),t.eventComponent.startDate.hour=n.getHours(),t.eventComponent.startDate.minute=n.getMinutes(),t.eventComponent.startDate.second=0;const s=t.eventComponent.isAllDay(),l=t.eventComponent.endDate.clone(),d=t.eventComponent.startDate.clone();if(s){if(l.addDuration(r.wy.fromSeconds(-86400)),-1===l.compare(d)){const e=(0,a.A)().getTimezoneForId(l.timezoneId);t.eventComponent.endDate=t.eventComponent.startDate.getInTimezone(e),t.endDate=(0,o.z8)(t.eventComponent.endDate),t.eventComponent.endDate.addDuration(r.wy.fromSeconds(86400))}}else if(-1===l.compare(d)){const e=(0,a.A)().getTimezoneForId(l.timezoneId);t.eventComponent.endDate=t.eventComponent.startDate.getInTimezone(e),t.endDate=(0,o.z8)(t.eventComponent.endDate)}t.startDate=n},changeStartTimezoneMutation(e){let{calendarObjectInstance:t,startTimezone:n}=e;const o=(0,a.A)().getTimezoneForId(n);t.eventComponent.startDate.replaceTimezone(o),t.startTimezoneId=n,"floating"!==n&&"floating"!==t.endTimezoneId||(t.eventComponent.endDate.replaceTimezone(o),t.endTimezoneId=n)},changeEndDateMutation(e){let{calendarObjectInstance:t,endDate:n}=e;const s=t.eventComponent.endDate;t.eventComponent.endDate=s,t.eventComponent.endDate.year=n.getFullYear(),t.eventComponent.endDate.month=n.getMonth()+1,t.eventComponent.endDate.day=n.getDate(),t.eventComponent.endDate.hour=n.getHours(),t.eventComponent.endDate.minute=n.getMinutes(),t.eventComponent.endDate.second=0;const l=t.eventComponent.isAllDay(),d=t.eventComponent.endDate.clone(),c=t.eventComponent.startDate.clone();if(l){if(-1===d.compare(c)){const e=(0,a.A)().getTimezoneForId(c.timezoneId);t.eventComponent.startDate=t.eventComponent.endDate.getInTimezone(e),t.startDate=(0,o.z8)(t.eventComponent.startDate)}t.eventComponent.endDate.addDuration(r.wy.fromSeconds(86400))}else if(-1===d.compare(c))if(d.addDuration(r.wy.fromSeconds(86400)),-1===d.compare(c)){const e=(0,a.A)().getTimezoneForId(c.timezoneId);t.eventComponent.startDate=t.eventComponent.endDate.getInTimezone(e),t.startDate=(0,o.z8)(t.eventComponent.startDate)}else t.eventComponent.endDate.addDuration(r.wy.fromSeconds(86400)),n=new Date(n.getTime()+864e5);t.endDate=n},changeEndTimezoneMutation(e){let{calendarObjectInstance:t,endTimezone:n}=e;const o=(0,a.A)().getTimezoneForId(n);t.eventComponent.endDate.replaceTimezone(o),t.endTimezoneId=n,"floating"!==n&&"floating"!==t.startTimezoneId||(t.eventComponent.startDate.replaceTimezone(o),t.startTimezoneId=n)},toggleAllDayMutation(e){let{calendarObjectInstance:t}=e;if(!t.eventComponent.canModifyAllDay())return;const n=t.eventComponent.isAllDay();t.eventComponent.startDate.isDate=!n,t.eventComponent.endDate.isDate=!n,t.isAllDay=t.eventComponent.isAllDay(),n?t.eventComponent.endDate.addDuration(r.wy.fromSeconds(-86400)):t.eventComponent.endDate.addDuration(r.wy.fromSeconds(86400))},changeTimeToDefaultForTimedEvents(e){let{calendarObjectInstance:t}=e;const n=t.eventComponent.startDate,a=t.eventComponent.endDate;0===n.hour&&0===n.minute&&0===a.hour&&0===a.minute&&(n.hour=10,a.hour=11,t.startDate=(0,o.z8)(n),t.endDate=(0,o.z8)(a))},changeLocation(e){let{calendarObjectInstance:t,location:n}=e;t.eventComponent.deleteAllProperties("X-APPLE-STRUCTURED-LOCATION"),t.eventComponent.location=n,t.location=n},changeDescription(e){let{calendarObjectInstance:t,description:n}=e;const a=t.eventComponent.getFirstProperty("Description");if(a)for(const e of a.getParametersIterator())a.deleteParameter(e.name);t.eventComponent.deleteAllProperties("X-ALT-DESC"),t.eventComponent.description=n,t.description=n},changeAccessClass(e){let{calendarObjectInstance:t,accessClass:n}=e;t.eventComponent.accessClass=n,t.accessClass=n},changeStatus(e){let{calendarObjectInstance:t,status:n}=e;t.eventComponent.status=n,t.status=n},changeTimeTransparency(e){let{calendarObjectInstance:t,timeTransparency:n}=e;t.eventComponent.timeTransparency=n,t.timeTransparency=n},changeCustomColor(e){let{calendarObjectInstance:t,customColor:n}=e;if(null===n)return t.eventComponent.deleteAllProperties("COLOR"),void Y.default.set(t,"customColor",null);const a=(0,l.mj)(n),o=(0,l.dU)(a);if(!a||!o)return console.error("Setting custom color failed"),console.error("customColor: ",n),console.error("cssColorName: ",a),void console.error("hexColorOfCssName: ",o);t.eventComponent.color=a,Y.default.set(t,"customColor",o)},addAttendee(e){let{calendarObjectInstance:t,commonName:n,uri:a,calendarUserType:o=null,participationStatus:s=null,role:l=null,rsvp:d=null,language:c=null,timezoneId:i=null,organizer:m=null,member:u=null}=e;const _=r.Uy.fromNameAndEMail(n,a);null!==o&&(_.userType=o),null!==s&&(_.participationStatus=s),null!==l&&(_.role=l),null!==d&&(_.rsvp=d),null!==c&&(_.language=c),null!==i&&_.updateParameterIfExist("TZID",i),null!==u&&_.updateParameterIfExist("MEMBER",u),t.eventComponent.addProperty(_),t.attendees.push({commonName:n,participationStatus:s,role:l,rsvp:d,uri:a,attendeeProperty:_}),!t.organizer&&m&&this.setOrganizer({calendarObjectInstance:t,commonName:m.displayname,email:m.emailAddress})},removeAttendee(e){let{calendarObjectInstance:t,attendee:n}=e;t.eventComponent.removeAttendee(n.attendeeProperty),"GROUP"===n.attendeeProperty.userType&&n.members.forEach((function(e){if(Array.isArray(e.attendeeProperty.member)&&e.attendeeProperty.member.length>1){const t=e.attendeeProperty.member.findIndex((function(e){return e===n.uri}));-1!==t&&e.attendeeProperty.member.splice(t,1)}else{t.eventComponent.removeAttendee(e.attendeeProperty);const n=t.attendees.indexOf(e);-1!==n&&t.attendees.splice(n,1)}}));const a=t.attendees.indexOf(n);-1!==a&&t.attendees.splice(a,1)},changeAttendeesParticipationStatus(e){let{attendee:t,participationStatus:n}=e;t.attendeeProperty.participationStatus=n,t.participationStatus=n},changeAttendeesRole(e){let{attendee:t,role:n}=e;t.attendeeProperty.role=n,t.role=n},toggleAttendeeRSVP(e){let{attendee:t}=e;const n=t.attendeeProperty.rsvp;t.attendeeProperty.rsvp=!n,t.rsvp=!n},setOrganizer(e){let{calendarObjectInstance:t,commonName:n=null,email:a}=e;t.eventComponent.setOrganizerFromNameAndEMail(n,a),Y.default.set(t,"organizer",{commonName:n,uri:a,attendeeProperty:t.eventComponent.getFirstProperty("ORGANIZER")})},addCategory(e){let{calendarObjectInstance:t,category:n}=e;t.eventComponent.addCategory(n),t.categories.push(n)},removeCategory(e){let{calendarObjectInstance:t,category:n}=e;t.eventComponent.removeCategory(n);const a=t.categories.indexOf(n);-1!==a&&t.categories.splice(a,1)},changeRecurrenceInterval(e){let{recurrenceRule:t,interval:n}=e;t.recurrenceRuleValue&&(t.recurrenceRuleValue.interval=n,t.interval=n,console.debug(t.recurrenceRuleValue._innerValue.toString()))},changeRecurrenceFrequencyMutation(e){let{recurrenceRule:t,frequency:n}=e;t.recurrenceRuleValue&&(t.recurrenceRuleValue.frequency=n,t.frequency=n,console.debug(t.recurrenceRuleValue._innerValue.toString()))},changeRecurrenceCount(e){let{recurrenceRule:t,count:n}=e;t.recurrenceRuleValue&&(t.recurrenceRuleValue.count=n,t.count=n,t.until=null,console.debug(t.recurrenceRuleValue._innerValue.toString()))},changeRecurrenceUntil(e){let{calendarObjectInstance:t,recurrenceRule:n,until:a}=e;n.recurrenceRuleValue&&("floating"!==t.startTimezoneId?n.recurrenceRuleValue.until=r.Z4.fromJSDate(a,{zone:"utc"}):n.recurrenceRuleValue.until=r.Z4.fromJSDate(a),n.until=a,n.count=null,console.debug(n.recurrenceRuleValue._innerValue.toString()))},changeRecurrenceToInfinite(e){let{recurrenceRule:t}=e;t.recurrenceRuleValue&&(t.recurrenceRuleValue.setToInfinite(),t.until=null,t.count=null,console.debug(t.recurrenceRuleValue._innerValue.toString()))},resetRecurrenceByParts(e){let{recurrenceRule:t}=e;if(t.recurrenceRuleValue){const e=["BYSECOND","BYMINUTE","BYHOUR","BYDAY","BYMONTHDAY","BYYEARDAY","BYWEEKNO","BYMONTH","BYSETPOS"];for(const n of e)t.recurrenceRuleValue.setComponent(n,[]);Y.default.set(t,"byDay",[]),Y.default.set(t,"byMonth",[]),Y.default.set(t,"byMonthDay",[]),Y.default.set(t,"bySetPosition",null),console.debug(t.recurrenceRuleValue._innerValue.toString())}},setDefaultRecurrenceByPartsForMonthlyBySetPosition(e){let{calendarObjectInstance:t,recurrenceRule:n}=e;if(n.recurrenceRuleValue){const{byDay:e,bySetPosition:a}=function(e){const t=s(e);let n=1,a=e.getDate();for(;a>7;a-=7)n++;return{byDay:t,bySetPosition:n}}(t.startDate);n.recurrenceRuleValue.setComponent("BYDAY",[e]),n.recurrenceRuleValue.setComponent("BYSETPOS",[a]),n.byDay.push(e),n.bySetPosition=a,console.debug(n.recurrenceRuleValue._innerValue.toString())}},addByDayToRecurrenceRule(e){let{recurrenceRule:t,byDay:n}=e;if(t.recurrenceRuleValue){const e=t.recurrenceRuleValue.getComponent("BYDAY");-1===e.indexOf(n)&&(e.push(n),t.recurrenceRuleValue.setComponent("BYDAY",e));-1===t.byDay.indexOf(n)&&t.byDay.push(n),console.debug(t.recurrenceRuleValue._innerValue.toString())}},removeByDayFromRecurrenceRule(e){let{recurrenceRule:t,byDay:n}=e;if(t.recurrenceRuleValue){const e=t.recurrenceRuleValue.getComponent("BYDAY"),a=e.indexOf(n);-1!==a&&(e.splice(a,1),t.recurrenceRuleValue.setComponent("BYDAY",e));const o=t.byDay.indexOf(n);-1!==o&&t.byDay.splice(o,1),console.debug(t.recurrenceRuleValue._innerValue.toString())}},addByMonthDayToRecurrenceRule(e){let{recurrenceRule:t,byMonthDay:n}=e;if(t.recurrenceRuleValue){const e=t.recurrenceRuleValue.getComponent("BYMONTHDAY");-1===e.indexOf(n)&&(e.push(n),t.recurrenceRuleValue.setComponent("BYMONTHDAY",e));-1===t.byMonthDay.indexOf(n)&&t.byMonthDay.push(n),console.debug(t.recurrenceRuleValue._innerValue.toString())}},removeByMonthDayFromRecurrenceRule(e){let{recurrenceRule:t,byMonthDay:n}=e;if(t.recurrenceRuleValue){const e=t.recurrenceRuleValue.getComponent("BYMONTHDAY"),a=e.indexOf(n);-1!==a&&(e.splice(a,1),t.recurrenceRuleValue.setComponent("BYMONTHDAY",e));const o=t.byMonthDay.indexOf(n);-1!==o&&t.byMonthDay.splice(o,1),console.debug(t.recurrenceRuleValue._innerValue.toString())}},addByMonthToRecurrenceRule(e){let{recurrenceRule:t,byMonth:n}=e;if(t.recurrenceRuleValue){console.debug("addByMonthToRecurrenceRule",n);const e=t.recurrenceRuleValue.getComponent("BYMONTH");-1===e.indexOf(n)&&(e.push(n),t.recurrenceRuleValue.setComponent("BYMONTH",e));-1===t.byMonth.indexOf(n)&&t.byMonth.push(n),console.debug(t.recurrenceRuleValue._innerValue.toString())}},removeByMonthFromRecurrenceRule(e){let{recurrenceRule:t,byMonth:n}=e;if(t.recurrenceRuleValue){console.debug("removeByMonthFromRecurrenceRule",n);const e=t.recurrenceRuleValue.getComponent("BYMONTH"),a=e.indexOf(n);-1!==a&&(e.splice(a,1),t.recurrenceRuleValue.setComponent("BYMONTH",e));const o=t.byMonth.indexOf(n);-1!==o&&t.byMonth.splice(o,1),console.debug(t.recurrenceRuleValue._innerValue.toString())}},changeRecurrenceByDay(e){let{recurrenceRule:t,byDay:n}=e;t.recurrenceRuleValue&&(t.recurrenceRuleValue.setComponent("BYDAY",n),Y.default.set(t,"byDay",n),console.debug(t.recurrenceRuleValue._innerValue.toString()))},changeRecurrenceBySetPosition(e){let{recurrenceRule:t,bySetPosition:n}=e;t.recurrenceRuleValue&&(t.recurrenceRuleValue.setComponent("BYSETPOS",[n]),Y.default.set(t,"bySetPosition",n),console.debug(t.recurrenceRuleValue._innerValue.toString()))},markRecurrenceRuleAsSupported(e){let{recurrenceRule:t}=e;t.isUnsupported=!1},changeAlarmType(e){let{alarm:t,type:n}=e;t.alarmComponent&&(t.alarmComponent.action=n,t.type=n,console.debug(t.alarmComponent.toICALJs().toString()))},changeAlarmAbsoluteDate(e){let{alarm:t,date:n}=e;t.alarmComponent&&(t.alarmComponent.trigger.value.year=n.getFullYear(),t.alarmComponent.trigger.value.month=n.getMonth()+1,t.alarmComponent.trigger.value.day=n.getDate(),t.alarmComponent.trigger.value.hour=n.getHours(),t.alarmComponent.trigger.value.minute=n.getMinutes(),t.alarmComponent.trigger.value.second=0,t.absoluteDate=n,console.debug(t.alarmComponent.toICALJs().toString()))},changeAlarmAbsoluteTimezoneId(e){let{alarm:t,timezoneId:n}=e;if(t.alarmComponent){const e=(0,a.A)().getTimezoneForId(n);t.alarmComponent.trigger.value.replaceTimezone(e),t.absoluteTimezoneId=n,console.debug(t.alarmComponent.toICALJs().toString())}},updateAlarmAllDayParts(e){let{alarm:t}=e;if(t.alarmComponent){const e=t.alarmComponent.trigger.value.totalSeconds,n=(0,d.rG)(e);t.relativeUnitAllDay=n.unit,t.relativeAmountAllDay=n.amount,t.relativeHoursAllDay=n.hours,t.relativeMinutesAllDay=n.minutes}},updateAlarmTimedParts(e){let{alarm:t}=e;if(t.alarmComponent){const e=t.alarmComponent.trigger.value.totalSeconds,n=(0,d.R2)(e);t.relativeUnitTimed=n.unit,t.relativeAmountTimed=n.amount,console.debug(t.alarmComponent.toICALJs().toString())}},addAlarmToCalendarObjectInstance(e){let{calendarObjectInstance:t,type:n,totalSeconds:a}=e;if(t.eventComponent){const e=t.eventComponent,o=r.wy.fromSeconds(a),s=e.addRelativeAlarm(n,o),l=i(s);t.alarms.push(l),console.debug(l.alarmComponent.toICALJs().toString())}},removeAlarmFromCalendarObjectInstance(e){let{calendarObjectInstance:t,alarm:n}=e;if(n.alarmComponent){t.eventComponent.removeAlarm(n.alarmComponent);const e=t.alarms.indexOf(n);-1!==e&&t.alarms.splice(e,1)}},addAttachmentBySharedData(e){let{calendarObjectInstance:t,sharedData:n}=e;const a=r.zN.fromLink(n.url),o=n.fileName,s=new r.kH("FILENAME",o),l=new r.kH("X-NC-HAS-PREVIEW",n["has-preview"].toString()),d=new r.kH("X-NC-FILE-ID",n.fileid.toString()),c=new r.kH("X-NC-SHARED-TYPES",n["share-types"]["share-type"]?n["share-types"]["share-type"].join(","):"");a.setParameter(s),a.setParameter(d),a.setParameter(l),a.setParameter(c),a.isNew=!0,a.shareTypes=n["share-types"]["share-type"]?n["share-types"]["share-type"].join(","):"",a.fileName=o,a.xNcFileId=n.fileid,a.xNcHasPreview=n["has-preview"],a.formatType=n.getcontenttype,a.uri=n.url?n.url:(0,M.Jv)(`/f/${n.fileid}`),t.eventComponent.addProperty(a),t.attachments.push(a)},addAttachmentWithProperty(e){let{calendarObjectInstance:t,sharedData:n}=e;const a={},o=n.fileName;a.isNew=!0,a.shareTypes=("number"==typeof n?.["share-types"]?.["share-type"]?n?.["share-types"]?.["share-type"]?.toString():n?.["share-types"]?.["share-type"]?.join(","))??null,a.fileName=o,a.xNcFileId=n.fileid,a.xNcHasPreview=n["has-preview"],a.formatType=n.getcontenttype,a.uri=n.url?n.url:(0,M.Jv)(`/f/${n.fileid}`);const s=r.zN.fromLink(a.uri,a.formatType),l=new r.kH("FILENAME",o),d=new r.kH("X-NC-HAS-PREVIEW",a.xNcHasPreview.toString()),c=new r.kH("X-NC-FILE-ID",a.xNcFileId.toString());if(null!==a.shareTypes){const e=new r.kH("X-NC-SHARED-TYPES",a.shareTypes);s.setParameter(e)}s.setParameter(l),s.setParameter(c),s.setParameter(d),s.uri=a.uri,a.attachmentProperty=s,t.eventComponent.addProperty(s),t.attachments.push(a)},deleteAttachment(e){let{calendarObjectInstance:t,attachment:n}=e;try{const e=t.attachments.indexOf(n);-1!==e&&t.attachments.splice(e,1),t.eventComponent.removeAttachment(n.attachmentProperty)}catch{}},async resolveClosestRecurrenceIdForCalendarObject(e){let{objectId:t,closeToDate:n}=e;const a=(0,k.A)(),o=(await a.getEventByObjectId({objectId:t})).calendarComponent.getVObjectIterator().next().value,s=r.Z4.fromJSDate(n,!0);return o.recurrenceManager.getClosestOccurrence(s).getReferenceRecurrenceId().unixTime},async getCalendarObjectInstanceByObjectIdAndRecurrenceId(e){let{objectId:t,recurrenceId:n}=e;const a=(0,k.A)();if(this.existingEvent.objectId===t&&this.existingEvent.recurrenceId===n)return Promise.resolve({calendarObject:this.calendarObject,calendarObjectInstance:this.calendarObjectInstance});const o=new Date(1e3*n),r=await a.getEventByObjectId({objectId:t}),s=(0,E.s)(r,o);if(null===s)throw new Error("Not a valid recurrence-id");const l=w(s);return this.setCalendarObjectInstanceForExistingEvent({calendarObject:r,calendarObjectInstance:l,objectId:t,recurrenceId:n}),{calendarObject:r,calendarObjectInstance:l}},async getCalendarObjectInstanceForNewEvent(e){let{isAllDay:t,start:n,end:a,timezoneId:o}=e;const r=(0,P.A)(),s=(0,U.A)();if(!0===this.isNew)return Promise.resolve({calendarObject:this.calendarObject,calendarObjectInstance:this.calendarObjectInstance});const l=await r.createNewEvent({start:n,end:a,isAllDay:t,timezoneId:o}),d=new Date(1e3*n),c=(0,E.s)(l,d),i=w(c),m=parseInt(s.defaultReminder);isNaN(m)||(this.addAlarmToCalendarObjectInstance({calendarObjectInstance:i,type:"DISPLAY",totalSeconds:m}),N.Ay.debug(`Added defaultReminder (${m}s) to newly created event`));const u=(0,B.B)().status.defaultValue;return i.eventComponent.status=u,i.status=u,this.setCalendarObjectInstanceForNewEvent({calendarObject:l,calendarObjectInstance:i}),{calendarObject:l,calendarObjectInstance:i}},async updateCalendarObjectInstanceForNewEvent(e){let{isAllDay:t,start:n,end:a,timezoneId:o}=e;const r=(0,P.A)();return await r.updateTimeOfNewEvent({calendarObjectInstance:this.calendarObjectInstance,start:n,end:a,isAllDay:t,timezoneId:o}),this.setCalendarObjectInstanceForNewEvent({calendarObject:this.calendarObject,calendarObjectInstance:this.calendarObjectInstance}),{calendarObject:this.calendarObject,calendarObjectInstance:this.calendarObjectInstance}},async saveCalendarObjectInstance(e){let{thisAndAllFuture:t,calendarId:n}=e;const a=(0,P.A)(),o=this.calendarObjectInstance.eventComponent,r=this.calendarObject;if((0,d.IS)(o),await(0,F.EX)(o),o.isDirty()){let e=null,s=null;null!==o.primaryItem&&o.canCreateRecurrenceExceptions()&&([e,s]=o.createRecurrenceException(t)),await a.updateCalendarObject({calendarObject:r}),null!==e&&null!==s&&e.root!==s.root&&await a.createCalendarObjectFromFork({eventComponent:s,calendarId:n})}n!==this.calendarObject.calendarId&&await a.moveCalendarObject({calendarObject:r,newCalendarId:n})},async duplicateCalendarObjectInstance(){const e=(0,P.A)(),t=this.calendarObjectInstance,n=t.eventComponent,a=n.startDate.getInUTC(),o=n.endDate.getInUTC(),s=await e.createNewEvent({start:a.unixTime,end:o.unixTime,timezoneId:n.startDate.timezoneId,isAllDay:n.isAllDay()}),d=(0,E.s)(s,a.jsDate);!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.title=e.title,t.location=e.location,t.description=e.description,t.accessClass=e.accessClass,t.status=e.status,t.timeTransparency=e.timeTransparency;for(const n of e.categories)t.addCategory(n);e.organizer&&t.setOrganizerFromNameAndEMail(e.organizer.commonName,e.organizer.uri);for(const n of e.alarms)if(n.isRelative){const e=r.wy.fromSeconds(n.relativeTrigger);t.addRelativeAlarm(n.type,e,n.relativeIsRelatedToStart)}else{const e=r.Z4.fromJSDate(n.absoluteDate);t.addAbsoluteAlarm(n.type,e)}for(const a of e.attendees)n&&(a.attendeeProperty.participationStatus="NEEDS-ACTION",a.attendeeProperty.rsvp=!0),t.addProperty(a.attendeeProperty);for(const n of e.eventComponent.getPropertyIterator("RRULE"))t.addProperty(n);e.customColor&&(t.color=(0,l.mj)(e.customColor))}(t,d,!0);const c=w(d);await this.setCalendarObjectInstanceForNewEvent({calendarObject:s,calendarObjectInstance:c})},async deleteCalendarObjectInstance(e){let{thisAndAllFuture:t}=e;const n=(0,P.A)(),a=this.calendarObjectInstance.eventComponent.removeThisOccurrence(t),o=this.calendarObject;a?await n.deleteCalendarObject({calendarObject:o}):await n.updateCalendarObject({calendarObject:o})},changeStartDate(e){let{calendarObjectInstance:t,startDate:n,onlyTime:a=!1,changeEndDate:o=!0}=e;a&&n.setFullYear(t.startDate.getFullYear(),t.startDate.getMonth(),t.startDate.getDate());const r=n.getTime()-t.startDate.getTime(),s=new Date(t.endDate.getTime()+r);this.changeStartDateMutation({calendarObjectInstance:t,startDate:n}),o&&this.changeEndDateMutation({calendarObjectInstance:t,endDate:s})},changeStartTimezone(e){let{calendarObjectInstance:t,startTimezone:n}=e;this.changeStartTimezoneMutation({calendarObjectInstance:t,startTimezone:n}),this.changeStartDateMutation({calendarObjectInstance:t,startDate:t.startDate})},changeEndDate(e){let{calendarObjectInstance:t,endDate:n,onlyTime:a=!1}=e;a&&n.setFullYear(t.endDate.getFullYear(),t.endDate.getMonth(),t.endDate.getDate()),this.changeEndDateMutation({calendarObjectInstance:t,endDate:n})},changeEndTimezone(e){let{calendarObjectInstance:t,endTimezone:n}=e;this.changeEndTimezoneMutation({calendarObjectInstance:t,endTimezone:n}),this.changeEndDateMutation({calendarObjectInstance:t,endDate:t.endDate})},changeRecurrenceFrequency(e){let{calendarObjectInstance:t,recurrenceRule:n,frequency:a}=e;if(console.debug(t),console.debug(n),console.debug(a),"NONE"===n.frequency&&"NONE"!==a){const e=r.TM.fromData({}),o=new r.mA("RRULE",e);t.eventComponent.addProperty(o),t.recurrenceRule.recurrenceRuleValue=e,this.resetRecurrenceByParts({recurrenceRule:n}),this.changeRecurrenceFrequencyMutation({calendarObjectInstance:t,recurrenceRule:t.recurrenceRule,frequency:a}),this.changeRecurrenceInterval({calendarObjectInstance:t,recurrenceRule:t.recurrenceRule,interval:1}),this.changeRecurrenceToInfinite({recurrenceRule:t.recurrenceRule}),this.setDefaultRecurrenceByParts({calendarObjectInstance:t,recurrenceRule:n,frequency:a}),console.debug(`changed from none to ${a}`)}else"NONE"!==n.frequency&&"NONE"===a?(console.debug("calling removeRecurrenceRuleFromCalendarObjectInstance"),n.recurrenceRuleValue&&(t.eventComponent.deleteAllProperties("RRULE"),Y.default.set(t,"recurrenceRule",z().recurrenceRule),console.debug(t),console.debug(n))):(this.resetRecurrenceByParts({recurrenceRule:n}),this.changeRecurrenceFrequencyMutation({calendarObjectInstance:t,recurrenceRule:t.recurrenceRule,frequency:a}),this.setDefaultRecurrenceByParts({calendarObjectInstance:t,recurrenceRule:n,frequency:a}))},setDefaultRecurrenceByParts(e){let{calendarObjectInstance:t,recurrenceRule:n,frequency:a}=e;switch(a){case"WEEKLY":if(n.recurrenceRuleValue){const e=s(t.startDate);n.recurrenceRuleValue.setComponent("BYDAY",[e]),n.byDay.push(e),console.debug(n.recurrenceRuleValue._innerValue.toString())}break;case"MONTHLY":if(n.recurrenceRuleValue){const e=t.startDate.getDate().toString();n.recurrenceRuleValue.setComponent("BYMONTHDAY",[e]),n.byMonthDay.push(e),console.debug(n.recurrenceRuleValue._innerValue.toString())}break;case"YEARLY":if(n.recurrenceRuleValue){const e=t.startDate.getMonth()+1;n.recurrenceRuleValue.setComponent("BYMONTH",[e]),n.byMonth.push(e),console.debug(n.recurrenceRuleValue._innerValue.toString())}}},changeMonthlyRecurrenceFromByDayToBySetPosition(e){let{calendarObjectInstance:t,recurrenceRule:n}=e;console.debug("changeMonthlyRecurrenceFromByDayToBySetPosition"),this.resetRecurrenceByParts({recurrenceRule:n}),this.setDefaultRecurrenceByPartsForMonthlyBySetPosition({calendarObjectInstance:t,recurrenceRule:n})},changeMonthlyRecurrenceFromBySetPositionToByDay(e){let{calendarObjectInstance:t,recurrenceRule:n}=e;if(console.debug("changeMonthlyRecurrenceFromBySetPositionToByDay"),this.resetRecurrenceByParts({recurrenceRule:n}),n.recurrenceRuleValue){const e=t.startDate.getDate().toString();n.recurrenceRuleValue.setComponent("BYMONTHDAY",[e]),n.byMonthDay.push(e),console.debug(n.recurrenceRuleValue._innerValue.toString())}},enableYearlyRecurrenceBySetPosition(e){let{calendarObjectInstance:t,recurrenceRule:n}=e;this.setDefaultRecurrenceByPartsForMonthlyBySetPosition({calendarObjectInstance:t,recurrenceRule:n})},disableYearlyRecurrenceBySetPosition(e){let{recurrenceRule:t}=e;this.changeRecurrenceByDay({recurrenceRule:t,byDay:[]}),t.recurrenceRuleValue&&(t.recurrenceRuleValue.setComponent("BYSETPOS",[]),Y.default.set(t,"bySetPosition",null),console.debug(t.recurrenceRuleValue._innerValue.toString()))},enableRecurrenceLimitByUntil(e){let t,{calendarObjectInstance:n,recurrenceRule:a}=e;switch(a.frequency){case"DAILY":t=new Date(n.startDate.getTime()+6048e5);break;case"WEEKLY":t=new Date(n.startDate.getTime()+24192e5);break;case"YEARLY":t=new Date(n.startDate.getFullYear()+10,n.startDate.getMonth(),n.startDate.getDate(),23,59,59);break;default:t=new Date(n.startDate.getFullYear()+1,n.startDate.getMonth(),n.startDate.getDate(),23,59,59)}this.changeRecurrenceToInfinite({recurrenceRule:a}),this.changeRecurrenceUntil({calendarObjectInstance:n,recurrenceRule:a,until:t})},enableRecurrenceLimitByCount(e){let{recurrenceRule:t}=e;this.changeRecurrenceToInfinite({recurrenceRule:t}),this.changeRecurrenceCount({recurrenceRule:t,count:2})},changeAlarmAmountTimed(e){let{alarm:t,amount:n}=e;t.alarmComponent&&(t.alarmComponent.trigger.value.totalSeconds=(0,d.yu)(n,t.relativeUnitTimed,t.relativeIsBefore),t.relativeAmountTimed=n,t.relativeTrigger=t.alarmComponent.trigger.value.totalSeconds,console.debug(t.alarmComponent.toICALJs().toString())),this.updateAlarmAllDayParts({alarm:t})},changeAlarmUnitTimed(e){let{alarm:t,unit:n}=e;t.alarmComponent&&(t.alarmComponent.trigger.value.totalSeconds=(0,d.yu)(t.relativeAmountTimed,n,t.relativeIsBefore),t.relativeUnitTimed=n,t.relativeTrigger=t.alarmComponent.trigger.value.totalSeconds,console.debug(t.alarmComponent.toICALJs().toString())),this.updateAlarmAllDayParts({alarm:t})},changeAlarmAmountAllDay(e){let{alarm:t,amount:n}=e;t.alarmComponent&&(t.alarmComponent.trigger.value.totalSeconds=(0,d.LW)(n,t.relativeHoursAllDay,t.relativeMinutesAllDay,t.relativeUnitAllDay),t.relativeAmountAllDay=n,t.relativeTrigger=t.alarmComponent.trigger.value.totalSeconds,console.debug(t.alarmComponent.toICALJs().toString())),this.updateAlarmTimedParts({alarm:t})},changeAlarmUnitAllDay(e){let{alarm:t,unit:n}=e;t.alarmComponent&&(t.alarmComponent.trigger.value.totalSeconds=(0,d.LW)(t.relativeAmountAllDay,t.relativeHoursAllDay,t.relativeMinutesAllDay,n),t.relativeUnitAllDay=n,t.relativeTrigger=t.alarmComponent.trigger.value.totalSeconds,console.debug(t.alarmComponent.toICALJs().toString())),this.updateAlarmTimedParts({alarm:t})},changeAlarmHoursMinutesAllDay(e){let{alarm:t,hours:n,minutes:a}=e;t.alarmComponent&&(t.alarmComponent.trigger.value.totalSeconds=(0,d.LW)(t.relativeAmountAllDay,n,a,t.relativeUnitAllDay),t.relativeHoursAllDay=n,t.relativeMinutesAllDay=a,t.relativeTrigger=t.alarmComponent.trigger.value.totalSeconds,console.debug(t.alarmComponent.toICALJs().toString())),this.updateAlarmTimedParts({alarm:t})},changeAlarmFromRelativeToAbsolute(e){let{calendarObjectInstance:t,alarm:n}=e;if(n.alarmComponent){const e=t.eventComponent.startDate.clone();e.isDate=!1,e.addDuration(n.alarmComponent.trigger.value),n.alarmComponent.setTriggerFromAbsolute(e),n.absoluteDate=(0,o.z8)(n.alarmComponent.trigger.value),n.absoluteTimezoneId=n.alarmComponent.trigger.value.timezoneId,console.debug(n.alarmComponent.toICALJs().toString())}n.relativeIsBefore=null,n.relativeIsRelatedToStart=null,n.relativeUnitTimed=null,n.relativeAmountTimed=null,n.relativeUnitAllDay=null,n.relativeAmountAllDay=null,n.relativeHoursAllDay=null,n.relativeMinutesAllDay=null,n.relativeTrigger=null},changeAlarmFromAbsoluteToRelative(e){let{calendarObjectInstance:t,alarm:n}=e;if(n.alarmComponent){const e=n.alarmComponent.trigger.value.subtractDateWithTimezone(t.eventComponent.startDate);n.alarmComponent.setTriggerFromRelative(e),n.relativeIsBefore=n.alarmComponent.trigger.value.isNegative,n.relativeIsRelatedToStart=!0,n.relativeTrigger=e.totalSeconds}this.updateAlarmAllDayParts({alarm:n}),this.updateAlarmTimedParts({alarm:n}),n.absoluteDate=null,n.absoluteTimezoneId=null},toggleAllDay(e){let{calendarObjectInstance:t}=e;const n=(0,U.A)();if(this.toggleAllDayMutation({calendarObjectInstance:t}),!t.isAllDay){if("floating"===t.startTimezoneId){const e=n.getResolvedTimezone;this.changeStartTimezoneMutation({calendarObjectInstance:t,startTimezone:e})}this.changeTimeToDefaultForTimedEvents({calendarObjectInstance:t})}}}})},46305:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var a=n(26620),o=n(53216),r=n(88075),s=n(63521),l=n(6088),d=n(51849),c=n(2023),i=n(85471),m=n(62297);const u=(0,d.nY)("calendarObjects",{state:()=>({calendarObjects:{},modificationCount:0}),getters:{getCalendarObjectById:e=>t=>e.calendarObjects[t]},actions:{async moveCalendarObject(e){let{calendarObject:t,newCalendarId:n}=e;if(!t.existsOnServer)return;const a=(0,s.A)(),r=(0,l.A)(),d=t.id,c=t.calendarId;if(c===n)return void o.Ay.error("Old calendar Id and new calendar Id are the same, nothing to move");const i=r.getCalendarById(n);i?(await t.dav.move(i.dav),this.calendarObjects[t.id].calendarId=n,r.addCalendarObjectToCalendarMutation({calendar:{id:n},calendarObjectId:t.id}),a.addCalendarObjectIdToAllTimeRangesOfCalendar({calendarId:n,calendarObjectId:t.id}),r.deleteCalendarObjectFromCalendarMutation({calendar:{id:c},calendarObjectId:d}),a.removeCalendarObjectIdFromAllTimeRangesOfCalendar({calendarId:c,calendarObjectId:d}),this.modificationCount++):o.Ay.error("Calendar to move to not found, aborting")},async updateCalendarObject(e){let{calendarObject:t}=e;const n=(0,s.A)(),a=(0,l.A)();if(t.existsOnServer)return t.dav.data=t.calendarComponent.toICS(),await t.dav.update(),n.addCalendarObjectIdToAllTimeRangesOfCalendar({calendarId:t.calendarId,calendarObjectId:t.id}),void this.modificationCount++;const o=a.getCalendarById(t.calendarId);t.dav=await o.dav.createVObject(t.calendarComponent.toICS()),t.existsOnServer=!0,this.updateCalendarObjectIdMutation({calendarObject:t}),this.appendCalendarObjectMutation({calendarObject:t}),a.addCalendarObjectToCalendarMutation({calendar:{id:t.calendarId},calendarObjectId:t.id}),n.addCalendarObjectIdToAllTimeRangesOfCalendar({calendarId:t.calendarId,calendarObjectId:t.id}),this.resetCalendarObjectToDavMutation({calendarObject:t}),this.modificationCount++},async createCalendarObjectFromFork(e){let{eventComponent:t,calendarId:n}=e;const o=(0,l.A)(),r=(0,s.A)(),d=o.getCalendarById(n),c=(0,a.cr)(t.root,d.id);c.dav=await d.dav.createVObject(c.calendarComponent.toICS()),c.existsOnServer=!0,this.updateCalendarObjectIdMutation({calendarObject:c}),this.appendCalendarObjectMutation({calendarObject:c}),o.addCalendarObjectToCalendarMutation({calendar:{id:c.calendarId},calendarObjectId:c.id}),r.addCalendarObjectIdToAllTimeRangesOfCalendar({calendarId:d.id,calendarObjectId:c.id}),this.modificationCount++},async deleteCalendarObject(e){let{calendarObject:t}=e;const n=(0,l.A)(),a=(0,s.A)();t.existsOnServer&&await t.dav.delete(),i.default.delete(this.calendarObjects,t.id),n.deleteCalendarObjectFromCalendarMutation({calendar:{id:t.calendarId},calendarObjectId:t.id}),a.removeCalendarObjectIdFromAnyTimeRange({calendarObjectId:t.id}),this.modificationCount++},createNewEvent(e){let{start:t,end:n,timezoneId:o,isAllDay:s}=e;const d=(0,l.A)(),c=(0,m.ZR)().getTimezoneForId(o),i=new Date(1e3*t),u=new Date(1e3*n),_=r.Z4.fromJSDate(i,!0).getInTimezone(c),p=r.Z4.fromJSDate(u,!0).getInTimezone(c);s&&(_.isDate=!0,p.isDate=!0);const h=(0,r.lh)(_,p);for(const e of h.getVObjectIterator())e.undirtify();const y=d.sortedCalendars[0].id;return Promise.resolve((0,a.cr)(h,y))},updateTimeOfNewEvent(e){let{calendarObjectInstance:t,start:n,end:a,timezoneId:o,isAllDay:r}=e;const s=(0,c.A)(),l=s.calendarObjectInstance.eventComponent.isDirty(),d=new Date(1e3*n),i=new Date(1e3*a);t.isAllDay!==r&&s.toggleAllDayMutation({calendarObjectInstance:t}),s.changeStartTimezone({calendarObjectInstance:t,startTimezone:o}),s.changeEndTimezone({calendarObjectInstance:t,endTimezone:o}),s.changeStartDateMutation({calendarObjectInstance:t,startDate:d}),r?s.changeEndDateMutation({calendarObjectInstance:t,endDate:new Date(i.getTime()-864e5)}):s.changeEndDateMutation({calendarObjectInstance:t,endDate:i}),l||t.eventComponent.undirtify()},appendOrUpdateCalendarObjectsMutation(e){let{calendarObjects:t=[]}=e;for(const e of t)i.default.set(this.calendarObjects,e.id,e)},appendCalendarObjectMutation(e){let{calendarObject:t}=e;this.calendarObjects[t.id]||i.default.set(this.calendarObjects,t.id,t)},updateCalendarObjectIdMutation(e){let{calendarObject:t}=e;null===t.dav?t.id=null:t.id=btoa(t.dav.url)},resetCalendarObjectToDavMutation(e){let{calendarObject:t}=e;if(t=this.calendarObjects[t.id],!t||!t.existsOnServer)return;const n=(0,r.zc)().getParserForFileType("text/calendar");n.parse(t.dav.data);const a=n.getItemIterator().next().value;a&&(t.calendarComponent=a)}}})},6088:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var a=n(28928),o=n(26620),r=n(77555),s=n(16126),l=n(39419),d=n(88484),c=n(53334),i=n(62863),m=n(88075),u=n(62297),_=n(35442),p=n(85168),h=n(48565),y=n(88659),v=n(38679),g=n(63521),f=n(40819),b=n(46305),j=n(51849),C=n(85471);const A=(0,j.nY)("calendars",{state:()=>({calendars:[],trashBin:void 0,scheduleInbox:void 0,deletedCalendars:[],deletedCalendarObjects:[],calendarsById:{},initialCalendarsLoaded:!1,editCalendarModal:void 0,syncTokens:new Map}),getters:{sortedCalendarsSubscriptions(e){const t=(0,v.A)();return e.calendars.filter((e=>e.supportsEvents||t.showTasks&&e.supportsTasks)).sort(((e,t)=>e.order-t.order))},sortedCalendars:e=>e.calendars.filter((e=>e.supportsEvents)).filter((e=>!e.readOnly)).sort(((e,t)=>e.order-t.order)),ownSortedCalendars:e=>e.calendars.filter((e=>e.supportsEvents)).filter((e=>!e.readOnly)).filter((e=>!e.isSharedWithMe)).sort(((e,t)=>e.order-t.order)),hasTrashBin:e=>void 0!==e.trashBin&&0!==e.trashBin.retentionDuration,sortedDeletedCalendars:e=>e.deletedCalendars.sort(((e,t)=>e.deletedAt-t.deletedAt)),allDeletedCalendarObjects(e){const t={};return e.calendars.forEach((e=>{const n=e.url.replace(/\/$/,""),a=n.slice(n.lastIndexOf("/")+1);t[a]=e})),e.deletedCalendarObjects.map((e=>({calendar:t[e.dav._props["{http://nextcloud.com/ns}calendar-uri"]],...e})))},sortedSubscriptions:e=>e.calendars.filter((e=>e.supportsEvents)).filter((e=>e.readOnly)).sort(((e,t)=>e.order-t.order)),enabledCalendars(e){const t=(0,v.A)();return e.calendars.filter((e=>e.supportsEvents||t.showTasks&&e.supportsTasks)).filter((e=>e.enabled))},getCalendarById:e=>t=>e.calendarsById[t],getCalendarByUrl:e=>t=>e.calendars.find((e=>e.url===t)),getBirthdayCalendar:e=>{for(const t of e.calendars){const e=t.url.slice(0,-1),n=e.lastIndexOf("/");if(e.slice(n+1)===_.DL)return t}return null},sortedCalendarFilteredByComponents(){return(e,t,n)=>this.sortedCalendars.filter((a=>!(e&&!a.supportsEvents)&&(!(t&&!a.supportsJournals)&&!(n&&!a.supportsTasks))))},getCalendarSyncToken:e=>t=>{const n=e.calendarsById[t.id];if(n)return e.syncTokens.get(t.id)??n.dav.syncToken}},actions:{async loadCollections(){const e=(0,f.A)(),{calendars:t,trashBins:n,scheduleInboxes:o,subscriptions:r}=await(0,a.JW)();return console.info("calendar home scanned",t,n,r),t.map((t=>(0,s.B)(t,e.getCurrentUserPrincipal))).forEach((e=>{this.addCalendarMutation({calendar:e})})),n.length&&(this.trashBin=n[0]),o.length&&(this.scheduleInbox=o[0]),this.initialCalendarsLoaded=!0,{calendars:this.calendars,trashBin:this.trashBin}},async loadDeletedCalendars(){(await(0,a.BK)()).forEach((e=>{this.deletedCalendars.some((t=>t.url===e.url))||this.deletedCalendars.push(e)}))},async loadDeletedCalendarObjects(){const e=await this.trashBin.findDeletedObjects();console.info("vobjects loaded",{vobjects:e}),e.forEach((e=>{try{const t=(0,o.ON)(e,void 0);if(this.deletedCalendarObjects.some((e=>e.uri===t.uri)))return;this.deletedCalendarObjects.push(t)}catch(t){console.error("could not convert calendar object",e,t)}}))},async getPublicCalendars(e){let{tokens:t}=e;const n=await(0,a.jb)(t),o=[];for(const e of n){const t=(0,s.B)(e);this.addCalendarMutation({calendar:t}),o.push(t)}return this.initialCalendarsLoaded=!0,o},async appendCalendar(e){let{displayName:t,color:n,order:o,components:r=["VEVENT"],timezone:l=null}=e;const d=(0,f.A)(),c=(0,v.A)();null===l&&(l=c.getResolvedTimezone);let _=null;const p=(0,i.A)().getTimezoneForId(l);if(p!==u.kc.utc&&p!==u.kc.floating){const e=m.Sl.fromEmpty();e.addComponent(m.Ln.fromICALJs(p.toICALJs())),_=e.toICS(!1)}const h=await(0,a.dZ)(t,n,r,o,_),y=(0,s.B)(h,d.getCurrentUserPrincipal);this.addCalendarMutation({calendar:y})},async appendSubscription(e){let{displayName:t,color:n,order:o,source:r}=e;const l=(0,f.A)(),d=await(0,a.Ky)(t,n,r,o),c=(0,s.B)(d,l.getCurrentUserPrincipal);this.addCalendarMutation({calendar:c})},async deleteCalendar(e){let{calendar:t}=e;await t.dav.delete(),this.calendars.splice(this.calendars.indexOf(t),1),C.default.delete(this.calendarsById,t.id),this.syncTokens.delete(t.id)},async deleteCalendarPermanently(e){let{calendar:t}=e;await t.delete({"X-NC-CalDAV-No-Trashbin":1}),this.deletedCalendars=this.deletedCalendars.filter((e=>e!==t))},deleteCalendarAfterTimeout(e){let{calendar:t,countdown:n=7}=e;C.default.set(this.calendarsById[t.id],"countdown",n);const a=setInterval((()=>{n--,n<0&&(n=0),C.default.set(this.calendarsById[t.id],"countdown",n)}),1e3),o=setTimeout((async()=>{try{await this.deleteCalendar({calendar:t})}catch(e){(0,p.Qg)((0,c.Tl)("calendar","An error occurred, unable to delete the calendar.")),console.error(e)}finally{clearInterval(a)}}),7e3);C.default.set(this.calendarsById[t.id],"deleteInterval",a),C.default.set(this.calendarsById[t.id],"deleteTimeout",o)},cancelCalendarDeletion(e){let{calendar:t}=e;t.deleteInterval&&clearInterval(t.deleteInterval),t.deleteTimeout&&clearTimeout(t.deleteTimeout),this.calendarsById[t.id].deleteInterval=void 0,this.calendarsById[t.id].deleteTimeout=void 0},async restoreCalendar(e){let{calendar:t}=e;await this.trashBin.restore(t.url),this.deletedCalendars=this.deletedCalendars.filter((e=>e!==t))},async restoreCalendarObject(e){let{vobject:t}=e;const n=(0,g.A)(),a=(0,b.A)();await this.trashBin.restore(t.uri),this.deletedCalendarObjects=this.deletedCalendarObjects.filter((e=>e.id!==t.id));const r=(0,o.ON)(t.dav,void 0).calendarComponent.getFirstComponent(t.objectType),s=n.getTimeRangeForCalendarCoveringRange(t.calendar.id,r.startDate?.unixTime,r.endDate?.unixTime);s&&(this.deleteFetchedTimeRangeFromCalendarMutation({calendar:t.calendar,fetchedTimeRangeId:s.id}),n.removeTimeRange({timeRangeId:s.id})),a.modificationCount++},async deleteCalendarObjectPermanently(e){let{vobject:t}=e;await t.dav.delete({"X-NC-CalDAV-No-Trashbin":1}),this.deletedCalendarObjects=this.deletedCalendarObjects.filter((e=>e.id!==t.id))},async toggleCalendarEnabled(e){let{calendar:t,updateDav:n=!0}=e;this.calendarsById[t.id].loading=!0,t.dav.enabled=!t.dav.enabled;try{n&&await t.dav.update(),this.calendarsById[t.id].loading=!1,this.calendarsById[t.id].enabled=!this.calendarsById[t.id].enabled}catch(e){throw this.calendarsById[t.id].loading=!1,e}},async renameCalendar(e){let{calendar:t,newName:n}=e;t.dav.displayname=n,await t.dav.update(),this.calendarsById[t.id].displayName=n},async changeCalendarColor(e){let{calendar:t,newColor:n}=e;t.dav.color=n,await t.dav.update(),this.calendarsById[t.id].color=n},async changeCalendarTransparency(e){let{calendar:t,transparency:n}=e;t.dav.transparency!==n&&(t.dav.transparency=n,await t.dav.update(),this.calendarsById[t.id].transparency=n)},async shareCalendar(e){let{calendar:t,user:n,displayName:a,uri:o,isGroup:r,isCircle:s}=e;await t.dav.share(o);const l={displayName:a,id:n,writeable:!1,isGroup:r,isCircle:s,uri:o};this.calendarsById[t.id].shares.push(l)},async toggleCalendarShareWritable(e){let{calendar:t,uri:n}=e;const a=t.shares.find((e=>e.uri===n));await t.dav.share(n,!a.writeable),t=this.calendars.find((e=>e.id===t.id)),a.writeable=!a.writeable},async unshareCalendar(e){let{calendar:t,uri:n}=e;await t.dav.unshare(n),t=this.calendars.find((e=>e.id===t.id));const a=t.shares.findIndex((e=>e.uri===n));t.shares.splice(a,1)},async publishCalendar(e){let{calendar:t}=e;await t.dav.publish();const n=t.dav.publishURL;t=this.calendars.find((e=>e.id===t.id)),t.publishURL=n},async unpublishCalendar(e){let{calendar:t}=e;await t.dav.unpublish(),t=this.calendars.find((e=>e.id===t.id)),t.publishURL=null},async getEventsFromCalendarInTimeRange(e){let{calendar:t,from:n,to:a}=e;const s=(0,g.A)(),l=(0,v.A)(),d=(0,b.A)();this.calendarsById[t.id].loading=!0;const c=await t.dav.findByTypeInTimeRange("VEVENT",n,a);let i=[];l.showTasks&&(i=await t.dav.findByTypeInTimeRange("VTODO",n,a)),s.addTimeRange({calendarId:t.id,from:(0,r.PY)(n),to:(0,r.PY)(a),lastFetched:(0,r.PY)((0,r.RK)()),calendarObjectIds:[]});const m=s.lastTimeRangeInsertId;this.calendarsById[t.id].fetchedTimeRanges.push(m);const u=[],_=[];for(const e of c.concat(i))try{const n=(0,o.ON)(e,t.id);u.push(n),_.push(n.id)}catch(n){console.error(`could not convert calendar object of calendar ${t.id}`,n,{response:e})}d.appendOrUpdateCalendarObjectsMutation({calendarObjects:u});for(const e of _)-1===this.calendarsById[t.id].calendarObjects.indexOf(e)&&this.calendarsById[t.id].calendarObjects.push(e);return s.appendCalendarObjectIdsToTimeFrame({timeRangeId:m,calendarObjectIds:_}),this.calendarsById[t.id].loading=!1,s.lastTimeRangeInsertId},async getEventByObjectId(e){let{objectId:t}=e;const n=(0,b.A)();if(n.getCalendarObjectById(t))return Promise.resolve(n.getCalendarObjectById(t));const a=atob(t),r=a.lastIndexOf("/"),s=a.slice(0,r+1),l=a.slice(r+1),d=btoa(s);if(!this.calendarsById[d])return Promise.reject(new Error(""));const c=this.calendarsById[d],i=await c.dav.find(l),m=(0,o.ON)(i,c.id);return n.appendCalendarObjectMutation({calendarObject:m}),this.addCalendarObjectToCalendarMutation({calendar:{id:d},calendarObjectId:m.id}),m},async importEventsIntoCalendar(){const e=(0,h.A)(),t=(0,y.A)(),n=(0,f.A)(),r=(0,g.A)(),i=(0,b.A)();e.stage=_.RW;const m=t.importFiles.slice();let u=0;for(const e of m){u+=e.parser.getItemCount();if("new"===t.importCalendarRelation[e.id]){const o=e.parser.getName()||(0,c.Tl)("calendar","Imported {filename}",{filename:e.name}),r=e.parser.getColor()||(0,d.GM)(o),l=[];e.parser.containsVEvents()&&l.push("VEVENT"),e.parser.containsVJournals()&&l.push("VJOURNAL"),e.parser.containsVTodos()&&l.push("VTODO");const i=await(0,a.dZ)(o,r,l,0),m=(0,s.B)(i,n.getCurrentUserPrincipal);this.addCalendarMutation({calendar:m}),t.setCalendarForFileId({fileId:e.id,calendarId:m.id})}}e.total=u;const p=(0,l.A)(3),v=[];for(const n of m){const a=t.importCalendarRelation[n.id],s=this.getCalendarById(a);for(const t of n.parser.getItemIterator())v.push(p((async()=>{const n=t.toICS();let l;try{l=await s.dav.createVObject(n)}catch(t){return e.denied++,void console.error(t)}const d=(0,o.ON)(l,a);i.appendCalendarObjectMutation({calendarObject:d}),this.addCalendarObjectToCalendarMutation({calendar:s,calendarObjectId:d.id}),r.addCalendarObjectIdToAllTimeRangesOfCalendar({calendarId:s.id,calendarObjectId:d.id}),e.accepted++})))}await Promise.all(v),e.stage=_.NU},async updateCalendarListOrder(e){let{newOrder:t}=e;const n=(0,l.A)(3),a=[],o=[];for(const e in t)a.push(n((async()=>{const n=this.calendarsById[e];n.dav.order!==t[e]&&(n.dav.order=t[e],await n.dav.update(),o.push({calendar:n,newOrder:t[e]}))})));await Promise.all(a);for(const{calendar:e,newOrder:t}of o)console.debug(e,t),this.calendarsById[e.id].order=t},addCalendarMutation(e){let{calendar:t}=e;const n=(0,s.t)(t);this.calendars.some((e=>e.id===n.id))||(this.calendars.push(n),C.default.set(this.calendars,0,this.calendars[0])),C.default.set(this.calendarsById,n.id,n)},deleteFetchedTimeRangeFromCalendarMutation(e){let{calendar:t,fetchedTimeRangeId:n}=e;const a=this.calendarsById[t.id]?.fetchedTimeRanges.indexOf(n);-1!==a&&this.calendarsById[t.id].fetchedTimeRanges.splice(a,1)},addCalendarObjectToCalendarMutation(e){let{calendar:t,calendarObjectId:n}=e;-1===this.calendarsById[t.id].calendarObjects.indexOf(n)&&this.calendarsById[t.id].calendarObjects.push(n)},deleteCalendarObjectFromCalendarMutation(e){let{calendar:t,calendarObjectId:n}=e;const a=this.calendarsById[t.id].calendarObjects.indexOf(n);-1!==a&&this.calendarsById[t.id].calendarObjects.slice(a,1)},updateCalendarSyncToken(e){let{calendar:t,syncToken:n}=e;this.getCalendarById(t.id)&&this.syncTokens.set(t.id,n)}}})},63521:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(51849),o=n(46305),r=n(85471);const s=(0,a.nY)("fetchedTimeRanges",{state:()=>({lastTimeRangeInsertId:-1,fetchedTimeRanges:[],fetchedTimeRangesById:{}}),getters:{getAllTimeRangesForCalendar:e=>t=>e.fetchedTimeRanges.filter((e=>e.calendarId===t)),getTimeRangeForCalendarCoveringRange:e=>(t,n,a)=>e.fetchedTimeRanges.find((e=>e.calendarId===t&&e.from<=n&&e.to>=a)),getAllTimeRangesOlderThan:e=>t=>e.fetchedTimeRanges.filter((e=>e.lastFetched<=t)),getCalendarObjectsByTimeRangeId:e=>t=>{const n=(0,o.A)();return e.fetchedTimeRangesById[t]?e.fetchedTimeRangesById[t].calendarObjectIds.map((e=>n.getCalendarObjectById(e))):[]}},actions:{addTimeRange(e){let{calendarId:t,from:n,to:a,lastFetched:o,calendarObjectIds:s}=e;const l={id:++this.lastTimeRangeInsertId,calendarId:t,from:n,to:a,lastFetched:o,calendarObjectIds:s};this.fetchedTimeRanges.push(l),r.default.set(this.fetchedTimeRangesById,l.id,l)},removeTimeRange(e){let{timeRangeId:t}=e;r.default.delete(this.fetchedTimeRangesById,t),this.fetchedTimeRanges=this.fetchedTimeRanges.filter((e=>e.id!==t))},appendCalendarObjectIdsToTimeFrame(e){let{timeRangeId:t,calendarObjectIds:n}=e;for(const e of n)-1===this.fetchedTimeRangesById[t].calendarObjectIds.indexOf(e)&&this.fetchedTimeRangesById[t].calendarObjectIds.push(e)},appendCalendarObjectIdToTimeRange(e){let{timeRangeId:t,calendarObjectId:n}=e;this.fetchedTimeRangesById[t].calendarObjectIds.push(n)},removeCalendarObjectIdFromTimeRange(e){let{timeRangeId:t,calendarObjectId:n}=e;const a=this.fetchedTimeRangesById[t].calendarObjectIds.indexOf(n);-1!==a&&this.fetchedTimeRangesById[t].calendarObjectIds.splice(a,1)},removeCalendarObjectIdFromAnyTimeRange(e){let{calendarObjectId:t}=e;for(const e of this.fetchedTimeRanges){const n=e.calendarObjectIds.indexOf(t);-1!==n&&e.calendarObjectIds.splice(n,1)}},addCalendarObjectIdToAllTimeRangesOfCalendar(e){let{calendarObjectId:t,calendarId:n}=e;for(const e of this.fetchedTimeRanges)e.calendarId===n&&-1===e.calendarObjectIds.indexOf(t)&&e.calendarObjectIds.push(t)},removeCalendarObjectIdFromAllTimeRangesOfCalendar(e){let{calendarObjectId:t,calendarId:n}=e;for(const e of this.fetchedTimeRanges){if(e.calendarId!==n)continue;const a=e.calendarObjectIds.indexOf(t);-1!==a&&e.calendarObjectIds.splice(a,1)}},clearFetchedTimeRanges(){this.lastTimeRangeInsertId=-1,this.fetchedTimeRanges=[],this.fetchedTimeRangesById={}}}})},88659:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(51849),o=n(85471);const r=(0,a.nY)("importFiles",{state:()=>({lastFileInsertId:-1,importFiles:[],importFilesById:{},importCalendarRelation:{}}),actions:{addFile(e){let{contents:t,lastModified:n,name:a,parser:r,size:s,type:l}=e;const d={id:++this.lastFileInsertId,contents:t,lastModified:n,name:a,parser:r,size:s,type:l};this.importFiles=[...this.importFiles,d],o.default.set(this.importFilesById,d.id,d)},setCalendarForFileId(e){let{fileId:t,calendarId:n}=e;o.default.set(this.importCalendarRelation,t,n)},removeAllFiles(){o.default.set(this,"importFiles",[]),o.default.set(this,"importFilesById",{}),o.default.set(this,"importCalendarRelation",{})}}})},48565:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(35442);const o=(0,n(51849).nY)("importState",{state:()=>({total:0,accepted:0,denied:0,stage:a.rk}),actions:{resetState(){this.total=0,this.accepted=0,this.denied=0,this.stage=a.rk}}})},40819:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(28928),o=n(53216),r=n(35442);const s=e=>Object.assign({},{id:null,calendarUserType:"INDIVIDUAL",emailAddress:null,displayname:null,principalScheme:null,userId:null,url:null,dav:null,isCircle:!1,isUser:!1,isGroup:!1,isCalendarResource:!1,isCalendarRoom:!1,principalId:null,scheduleDefaultCalendarUrl:null},e),l=e=>{const t=btoa(encodeURI(e.url)),n=e.calendarUserType,a=e.principalScheme,o=e.email,l=e.displayname,d=e.scheduleDefaultCalendarUrl,c=e.principalScheme.startsWith(r.mI),i=e.principalScheme.startsWith(r._l),m=e.principalScheme.startsWith(r.fM),u=e.principalScheme.startsWith(r.an),_=e.principalScheme.startsWith(r.bd);let p=null;c?p=e.principalScheme.substring(r.mI.length):i?p=e.principalScheme.substring(r._l.length):m?p=e.principalScheme.substring(r.fM.length):u?p=e.principalScheme.substring(r.an.length):_&&(p=e.principalScheme.substring(r.bd.length));const h=e.principalUrl,y=e.userId;return s({id:t,calendarUserType:n,principalScheme:a,emailAddress:o,displayname:l,url:h,dav:e,isUser:c,isGroup:i,isCircle:m,isCalendarResource:u,isCalendarRoom:_,principalId:p,userId:y,scheduleDefaultCalendarUrl:d})};var d=n(51849),c=n(85471),i=n(63814);const m=(0,d.nY)("principals",{state:()=>({principals:[],principalsById:{},currentUserPrincipal:null}),getters:{getPrincipalByUrl:e=>t=>e.principals.find((e=>e.url===t)),getPrincipalById:e=>t=>e.principalsById[t],getCurrentUserPrincipal:e=>e.principalsById[e.currentUserPrincipal],getCurrentUserPrincipalEmail:e=>e.principalsById[e.currentUserPrincipal]?.emailAddress,getRoomPrincipals:e=>e.principals.filter((e=>e.isCalendarRoom)),getResourcePrincipals:e=>e.principals.filter((e=>e.isCalendarResource))},actions:{async fetchPrincipalByUrl(e){let{url:t}=e;if(this.getPrincipalByUrl(t))return;const n=await(0,a.a9)(t);n&&this.addPrincipalMutation({principal:l(n)})},async fetchRoomAndResourcePrincipals(){const e={enableCalDAVResourceBooking:!0},t=await Promise.all([(0,a.wo)((0,i.dC)("dav/principals/calendar-rooms/"),e),(0,a.wo)((0,i.dC)("dav/principals/calendar-resources/"),e)]);for(const e of t)if(e){o.Ay.debug("Fetched principals",{principals:e});for(const t of e)this.addPrincipalMutation({principal:l(t)})}},async fetchCurrentUserPrincipal(){const e=(0,a.xX)();if(!e)return;const t=l(e);this.addPrincipalMutation({principal:t}),this.currentUserPrincipal=t.id,o.Ay.debug(`Current user principal is ${t.url}`)},addPrincipalMutation(e){let{principal:t}=e;const n=s(t);this.principalsById[n.id]||(this.principals.push(n),c.default.set(this.principalsById,n.id,n))},async changePrincipalScheduleDefaultCalendarUrl(e){let{principal:t,scheduleDefaultCalendarUrl:n}=e;t.dav.scheduleDefaultCalendarUrl=n,await t.dav.update(),c.default.set(this.principalsById[t.id],"scheduleDefaultCalendarUrl",n)}}})},38679:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var a=n(28928),o=n(16126),r=n(87133),s=n(88075),l=n(65043),d=n(63814);const c=async(e,t)=>{await l.Ay.post(function(e){return[(0,d.uM)("calendar","index.php"),"v1/config",e].join("/")}(e),{value:t})};var i=n(53216),m=n(51849),u=n(62863),_=n(38213),p=n(40819),h=n(63521),y=n(6088),v=n(46305);const g=(0,m.nY)("settings",{state:()=>({appVersion:null,firstRun:null,talkEnabled:!1,disableAppointments:!1,publicCalendars:null,eventLimit:null,showTasks:null,showWeekends:null,showWeekNumbers:null,skipPopover:null,slotDuration:null,defaultReminder:null,tasksEnabled:!1,timezone:"automatic",hideEventExport:!1,forceEventAlarmType:!1,canSubscribeLink:!0,showResources:!0,momentLocale:"en",attachmentsFolder:"/Calendar",attachmentsFolderCreated:!1}),getters:{getResolvedTimezone:e=>"automatic"===e.timezone?(0,r.t)():e.timezone,getResolvedTimezoneObject(){const e=this.getResolvedTimezone;let t=(0,u.A)().getTimezoneForId(e);return t||(t=(0,u.A)().getTimezoneForId("UTC")),t}},actions:{async toggleBirthdayCalendarEnabled(){const e=(0,y.A)();if(!!e.getBirthdayCalendar){const t=e.getBirthdayCalendar;await e.deleteCalendar({calendar:t})}else{const t=await(0,a.vV)(),n=(0,o.B)(t);e.addCalendarMutation({calendar:n})}},async toggleEventLimitEnabled(){const e=!this.eventLimit?"yes":"no";await c("eventLimit",e),this.eventLimit=!this.eventLimit},async togglePopoverEnabled(){const e=!this.skipPopover?"yes":"no";await c("skipPopover",e),this.skipPopover=!this.skipPopover},async toggleWeekendsEnabled(){const e=!this.showWeekends?"yes":"no";await c("showWeekends",e),this.showWeekends=!this.showWeekends},async toggleTasksEnabled(){const e=(0,h.A)(),t=(0,v.A)(),n=!this.showTasks?"yes":"no";await c("showTasks",n),this.showTasks=!this.showTasks,e.clearFetchedTimeRanges(),t.modificationCount++},async toggleWeekNumberEnabled(){const e=!this.showWeekNumbers?"yes":"no";await c("showWeekNr",e),this.showWeekNumbers=!this.showWeekNumbers},async setInitialView(e){let{initialView:t}=e;await c("view",t)},async setSlotDuration(e){let{slotDuration:t}=e;this.slotDuration!==t&&(await c("slotDuration",t),this.slotDuration=t)},async setDefaultReminder(e){let{defaultReminder:t}=e;this.defaultReminder!==t&&(await c("defaultReminder",t),this.defaultReminder=t)},async setTimezone(e){let{timezoneId:t}=e;this.timezone!==t&&(await c("timezone",t),this.timezone=t)},async setAttachmentsFolder(e){let{attachmentsFolder:t}=e;this.attachmentsFolder!==t&&(await c("attachmentsFolder",t),this.attachmentsFolder=t,this.attachmentsFolderCreated=!1)},async createAttachmentsFolder(){const e=(0,p.A)();if(this.attachmentsFolderCreated)return this.attachmentsFolder;const t=e.getCurrentUserPrincipal.dav.userId,n=await _.vV(this.attachmentsFolder,t);return n!==this.attachmentsFolder&&await this.setAttachmentsFolder({attachmentsFolder:n}),this.attachmentsFolderCreated=!0,n},initializeCalendarJsConfig(){(0,s.Nk)("PRODID",`-//IDN nextcloud.com//Calendar app ${this.appVersion}//EN`),(0,s.Nk)("property-list-significant-change",["SUMMARY","LOCATION","DESCRIPTION"])},loadSettingsFromServer(e){let{appVersion:t,eventLimit:n,firstRun:a,showWeekNumbers:o,showTasks:r,showWeekends:s,skipPopover:l,slotDuration:d,defaultReminder:c,talkEnabled:m,tasksEnabled:u,timezone:_,hideEventExport:p,forceEventAlarmType:h,disableAppointments:y,canSubscribeLink:v,attachmentsFolder:g,showResources:f,publicCalendars:b}=e;(0,i.fH)(`\nInitial settings:\n\t- AppVersion: ${t}\n\t- EventLimit: ${n}\n\t- FirstRun: ${a}\n\t- ShowWeekNumbers: ${o}\n\t- ShowTasks: ${r}\n\t- ShowWeekends: ${s}\n\t- SkipPopover: ${l}\n\t- SlotDuration: ${d}\n\t- DefaultReminder: ${c}\n\t- TalkEnabled: ${m}\n\t- TasksEnabled: ${u}\n\t- Timezone: ${_}\n\t- HideEventExport: ${p}\n\t- ForceEventAlarmType: ${h}\n\t- disableAppointments: ${y}\n\t- CanSubscribeLink: ${v}\n\t- attachmentsFolder: ${g}\n\t- ShowResources: ${f}\n\t- PublicCalendars: ${b}\n`),this.appVersion=t,this.eventLimit=n,this.firstRun=a,this.showWeekNumbers=o,this.showTasks=r,this.showWeekends=s,this.skipPopover=l,this.slotDuration=d,this.defaultReminder=c,this.talkEnabled=m,this.tasksEnabled=u,this.timezone=_,this.hideEventExport=p,this.forceEventAlarmType=h,this.disableAppointments=y,this.canSubscribeLink=v,this.attachmentsFolder=g,this.showResources=f,this.publicCalendars=b},setMomentLocale(e){let{locale:t}=e;(0,i.fH)(`Updated moment locale: ${t}`),this.momentLocale=t}}})},74717:(e,t,n)=>{"use strict";n.d(t,{IS:()=>i,LW:()=>c,R2:()=>s,rG:()=>d,yu:()=>l});var a=n(88075),o=n(53334);function r(e){switch(e){case"seconds":default:return 1;case"minutes":return 60;case"hours":return 3600;case"days":return 86400;case"weeks":return 604800}}function s(e){return 0===(e=Math.abs(e))?{amount:0,unit:"minutes"}:e%604800==0?{amount:e/604800,unit:"weeks"}:e%86400==0?{amount:e/86400,unit:"days"}:e%3600==0?{amount:e/3600,unit:"hours"}:e%60==0?{amount:e/60,unit:"minutes"}:{amount:e,unit:"seconds"}}function l(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e*r(t)*(n?-1:1)}function d(e){const t=r("days"),n=r("hours"),a=r("minutes"),o=e<0;e=Math.abs(e);let s=Math.floor(e/t);const l=e%t;0!==l&&o&&s++;let d=0,c=null;0===s?c="days":s%7==0?(d=s/7,c="weeks"):(d=s,c="days");let i=Math.floor(l/n);const m=l%n;let u=Math.floor(m/a);return o&&(i=24-i,0!==u&&(i--,u=60-u)),{amount:d,unit:c,hours:i,minutes:u}}function c(e,t,n,a){"weeks"===a&&(e*=7,a="days");if(e>0){e--,e*=r(a);let o=24-t,s=0;0!==n&&(o--,s=60-n),e+=o*r("hours"),e+=s*r("minutes"),e*=-1}else e*=r("days"),e+=t*r("hours"),e+=n*r("minutes");return e}function i(e){for(const t of e.getAlarmIterator()){if("EMAIL"!==t.action&&"DISPLAY"!==t.action)continue;t.deleteAllProperties("SUMMARY");const n=e.getFirstProperty("SUMMARY");if(n)t.addProperty(n.clone());else{const e=(0,o.Tl)("calendar","Untitled event");t.addProperty(new a.mA("SUMMARY",e))}if(!t.hasProperty("DESCRIPTION")){const e=(0,o.Tl)("calendar","This is an event reminder.");t.addProperty(new a.mA("DESCRIPTION",e))}t.deleteAllProperties("ATTENDEE");for(const n of e.getAttendeeIterator())["RESOURCE","ROOM"].includes(n.userType)||t.addProperty(new a.Uy("ATTENDEE",n.value))}}},39661:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(9048),o=n(33031),r=n.n(o),s=n(44383),l=n.n(s),d=n(50014),c=n.n(d),i=n(28854);const m=c()(Object.keys(a),(e=>a[e])),u=l()(a,m),_=r()(Object.keys(u).map((e=>({name:e,hex:u[e]}))),(e=>e.hex)),p={detailed:!1};function h(e){const t={...p,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}},n=r()(_,(t=>function(e,t){const n=y(i.get.rgb(e)),a=y(i.get.rgb(t));return Math.sqrt(Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2)+Math.pow(n[2]-a[2],2))}(e,t.hex)));return t.detailed?n[0]:n[0].name}function y(e){const t=[0,0,0],n=[0,0,0],a=[0,0,0];for(let n=0;n<e.length;n++){let a=e[n]/255;a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,t[n]=100*a}n[0]=(.4124*t[0]+.3576*t[1]+.1805*t[2])/95.047,n[1]=(.2126*t[0]+.7152*t[1]+.0722*t[2])/100,n[2]=(.0193*t[0]+.1192*t[1]+.9505*t[2])/108.883;for(let e=0;e<3;e++){let t=n[e];t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n[e]=t}return a[0]=parseFloat((116*n[1]-16).toFixed(3)),a[1]=parseFloat((500*(n[0]-n[1])).toFixed(3)),a[2]=parseFloat((200*(n[1]-n[2])).toFixed(3)),a}},88336:(e,t,n)=>{"use strict";n.d(t,{L:()=>r,s:()=>s});var a=n(88075),o=n(28928);function r(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"BUSY"){case"FREE":return"rgba(255,255,255,0)";case"BUSY-TENTATIVE":return"rgba(184,129,0,0.3)";case"BUSY":return"rgba(217,24,18,0.3)";case"BUSY-UNAVAILABLE":return"rgba(219,219,219)";default:return"rgba(0,113,173,0.3)"}}async function*s(e,t,n,r){const s=(0,a.TA)(e,t,n,r).toICS(),l=await(0,o.hC)(),d=await l.freeBusyRequest(s);for(const[,e]of Object.entries(d)){if(!e.success)continue;const t=(0,a.zc)().getParserForFileType("text/calendar");t.parse(e.calendarData);const n=t._calendarComponent.getFirstComponent("VFREEBUSY");if(n)for(const e of n.getPropertyIterator("ATTENDEE"))for(const t of n.getPropertyIterator("FREEBUSY"))"FREE"!==t.type&&(yield[e,t])}}},83843:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(53334),o=n(51651);async function r(){const e=(0,a.JK)().replace("_","-").toLowerCase(),t=(0,a.Z0)().replace("_","-").toLowerCase();if(e===t)return s(e);const[n,r]=await Promise.all([s(e),s(t)]);if(n===r)return n;const l=`nextcloud-calendar-fake-locale-${n}-${r}`;return o.A.defineLocale(l,{parentLocale:r,longDateFormat:{LT:o.A.localeData(n).longDateFormat("LT"),LTS:o.A.localeData(n).longDateFormat("LTS"),L:o.A.localeData(n).longDateFormat("L"),LL:o.A.localeData(n).longDateFormat("LL"),LLL:o.A.localeData(n).longDateFormat("LLL"),LLLL:o.A.localeData(n).longDateFormat("LLLL"),l:o.A.localeData(n).longDateFormat("l"),ll:o.A.localeData(n).longDateFormat("ll"),lll:o.A.localeData(n).longDateFormat("lll"),llll:o.A.localeData(n).longDateFormat("llll")},week:{dow:(0,a.JN)(),doy:o.A.localeData(n).firstDayOfYear()}}),l}async function s(e){try{return await n(89595)(`./${e}.js`),e}catch(t){const a=e.split("-");try{return e=a[0],await n(89595)(`./${e}.js`),e}catch(e){console.debug("Fallback to locale","en")}}return"en"}},89013:(e,t,n)=>{"use strict";function a(){return Math.random().toString(16).slice(2)}n.d(t,{z:()=>a})},41769:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var a=n(83503),o=n.n(a);const r=e=>{let t=e.toLowerCase();null===t.match(/^([0-9a-f]{4}-?){8}$/)&&(t=o()(t)),t=t.replace(/[^0-9a-f]/g,"");const n=function(e){e||(e=6);const t=new s(182,70,157),n=new s(221,203,85),a=new s(0,130,201),o=l(e,t,n),r=l(e,n,a),d=l(e,a,t);return o.concat(r).concat(d)}(6);return n[function(e,t){let n=0;const a=[];for(let t=0;t<e.length;t++)a.push(parseInt(e.charAt(t),16)%16);for(const e in a)n+=a[e];return parseInt(parseInt(n,10)%t,10)}(t,18)]};function s(e,t,n){this.r=e,this.g=t,this.b=n}function l(e,t,n){const a=[];a.push(t);const o=function(e,t){const n=new Array(3);return n[0]=(t[1].r-t[0].r)/e,n[1]=(t[1].g-t[0].g)/e,n[2]=(t[1].b-t[0].b)/e,n}(e,[t,n]);for(let n=1;n<e;n++){const e=parseInt(t.r+o[0]*n,10),r=parseInt(t.g+o[1]*n,10),l=parseInt(t.b+o[2]*n,10);a.push(new s(e,r,l))}return a}},78363:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var a=n(71354),o=n.n(a),r=n(76314),s=n.n(r)()(o());s.push([e.id,".icon-close[data-v-248a12ad]{display:block;height:100%}.modal__content[data-v-248a12ad]{padding:50px;margin-bottom:95px}.modal__content__actions[data-v-248a12ad]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal__content__actions__select[data-v-248a12ad]{width:260px}.modal__content__actions__date[data-v-248a12ad]{display:flex;justify-content:space-between;align-items:center}.modal__content__actions__date>*[data-v-248a12ad]{margin-left:5px}.modal__content__header[data-v-248a12ad]{margin-bottom:20px}.modal__content__header h3[data-v-248a12ad]{font-weight:500}.modal__content__header__attendees__user-bubble[data-v-248a12ad]{margin-right:5px}.modal__content__footer[data-v-248a12ad]{display:flex;justify-content:space-between;align-items:center;margin-top:20px}.modal__content__footer__title h3[data-v-248a12ad]{font-weight:500}.modal__content__footer__title__timezone[data-v-248a12ad]{color:var(--color-text-lighter)}[data-v-248a12ad] .vs__search{text-overflow:ellipsis}[data-v-248a12ad] .mx-input{height:38px !important}","",{version:3,sources:["webpack://./src/components/Editor/FreeBusy/FreeBusy.vue"],names:[],mappings:"AACA,6BACC,aAAA,CACA,WAAA,CAED,iCACC,YAAA,CAEA,kBAAA,CACA,0CACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,kBAAA,CACA,kDACC,WAAA,CAED,gDACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,kDACC,eAAA,CAIH,yCACC,kBAAA,CACA,4CACC,eAAA,CAGA,iEACC,gBAAA,CAIH,yCACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,eAAA,CAEC,mDACC,eAAA,CAED,0DACC,+BAAA,CAKJ,8BACC,sBAAA,CAED,4BACC,sBAAA",sourcesContent:[".icon-close{display:block;height:100%}.modal__content{padding:50px;margin-bottom:95px}.modal__content__actions{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal__content__actions__select{width:260px}.modal__content__actions__date{display:flex;justify-content:space-between;align-items:center}.modal__content__actions__date>*{margin-left:5px}.modal__content__header{margin-bottom:20px}.modal__content__header h3{font-weight:500}.modal__content__header__attendees__user-bubble{margin-right:5px}.modal__content__footer{display:flex;justify-content:space-between;align-items:center;margin-top:20px}.modal__content__footer__title h3{font-weight:500}.modal__content__footer__title__timezone{color:var(--color-text-lighter)}:deep(.vs__search){text-overflow:ellipsis}:deep(.mx-input){height:38px !important}"],sourceRoot:""}]);const l=s},62451:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var a=n(71354),o=n.n(a),r=n(76314),s=n.n(r)()(o());s.push([e.id,".blocking-event-free-busy{z-index:3 !important}.free-busy-block{opacity:.7 !important}","",{version:3,sources:["webpack://./src/components/Editor/FreeBusy/FreeBusy.vue"],names:[],mappings:"AACA,0BAEC,oBAAA,CAGD,iBACC,qBAAA",sourcesContent:[".blocking-event-free-busy{z-index:3 !important}.free-busy-block{opacity:.7 !important}"],sourceRoot:""}]);const l=s},15597:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(71354),o=n.n(a),r=n(76314),s=n.n(r)()(o());s.push([e.id,"\n[data-v-74e170ef] .avatardiv {\n\toverflow: visible !important;\n}\n","",{version:3,sources:["webpack://./src/components/Editor/Invitees/InviteesListSearch.vue"],names:[],mappings:";AAyVA;CACA,4BAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<template>\n\t<NcSelect class=\"invitees-search__multiselect\"\n\t\t:options=\"matches\"\n\t\t:searchable=\"true\"\n\t\t:max-height=\"600\"\n\t\t:placeholder=\"placeholder\"\n\t\t:class=\"{ 'showContent': inputGiven, 'icon-loading': isLoading }\"\n\t\t:clearable=\"false\"\n\t\t:label-outside=\"true\"\n\t\tinput-id=\"uid\"\n\t\tlabel=\"dropdownName\"\n\t\t@search=\"findAttendees\"\n\t\t@option:selected=\"addAttendee\">\n\t\t<template #option=\"option\">\n\t\t\t<div class=\"invitees-search-list-item\">\n\t\t\t\t\x3c!-- We need to specify a unique key here for the avatar to be reactive. --\x3e\n\t\t\t\t<Avatar v-if=\"option.isUser\"\n\t\t\t\t\t:key=\"option.uid\"\n\t\t\t\t\t:user=\"option.avatar\"\n\t\t\t\t\t:display-name=\"option.dropdownName\" />\n\t\t\t\t<Avatar v-else-if=\"option.type === 'circle'\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<GoogleCirclesCommunitiesIcon :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t</Avatar>\n\t\t\t\t<Avatar v-if=\"!option.isUser && option.type !== 'circle'\"\n\t\t\t\t\t:key=\"option.uid\"\n\t\t\t\t\t:url=\"option.avatar\"\n\t\t\t\t\t:display-name=\"option.commonName\" />\n\n\t\t\t\t<div class=\"invitees-search-list-item__label\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ option.commonName }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"option.email !== option.commonName && option.type !== 'circle' && option.type !== 'contactsgroup'\">\n\t\t\t\t\t\t{{ option.email }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"option.type === 'circle' || option.type === 'contactsgroup'\">\n\t\t\t\t\t\t{{ option.subtitle }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</NcSelect>\n</template>\n\n<script>\nimport {\n\tNcAvatar as Avatar,\n\tNcSelect,\n} from '@nextcloud/vue'\nimport { principalPropertySearchByDisplaynameOrEmail } from '../../../services/caldavService.js'\nimport isCirclesEnabled from '../../../services/isCirclesEnabled.js'\nimport {\n\tcircleSearchByName,\n\tcircleGetMembers,\n} from '../../../services/circleService.js'\nimport HttpClient from '@nextcloud/axios'\nimport debounce from 'debounce'\nimport { linkTo } from '@nextcloud/router'\nimport { randomId } from '../../../utils/randomId.js'\nimport GoogleCirclesCommunitiesIcon from 'vue-material-design-icons/GoogleCirclesCommunities.vue'\nimport { showInfo } from '@nextcloud/dialogs'\nimport { removeMailtoPrefix } from '../../../utils/attendee.js'\n\nexport default {\n\tname: 'InviteesListSearch',\n\tcomponents: {\n\t\tAvatar,\n\t\tNcSelect,\n\t\tGoogleCirclesCommunitiesIcon,\n\t},\n\tprops: {\n\t\talreadyInvitedEmails: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\torganizer: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisLoading: false,\n\t\t\tinputGiven: false,\n\t\t\tmatches: [],\n\t\t\tisCirclesEnabled,\n\t\t}\n\t},\n\tcomputed: {\n\t\tplaceholder() {\n\t\t\treturn this.$t('calendar', 'Search for emails, users, contacts, teams or groups')\n\t\t},\n\t\tnoResult() {\n\t\t\treturn this.$t('calendar', 'No match found')\n\t\t},\n\t},\n\tmethods: {\n\t\tfindAttendees: debounce(async function(query) {\n\t\t\tthis.isLoading = true\n\t\t\tconst matches = []\n\n\t\t\tif (query.length > 0) {\n\t\t\t\tconst promises = [\n\t\t\t\t\tthis.findAttendeesFromContactsAPI(query),\n\t\t\t\t\tthis.findAttendeesFromDAV(query),\n\t\t\t\t]\n\t\t\t\tif (isCirclesEnabled) {\n\t\t\t\t\tpromises.push(this.findAttendeesFromCircles(query))\n\t\t\t\t}\n\n\t\t\t\tconst [contactsResults, davResults, circleResults] = await Promise.all(promises)\n\t\t\t\tmatches.push(...contactsResults)\n\t\t\t\tmatches.push(...davResults)\n\t\t\t\tif (isCirclesEnabled) {\n\t\t\t\t\tmatches.push(...circleResults)\n\t\t\t\t}\n\n\t\t\t\t// Source of the Regex: https://stackoverflow.com/a/46181\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tconst emailRegex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n\t\t\t\tif (emailRegex.test(query)) {\n\t\t\t\t\tconst alreadyInList = matches.find((attendee) => attendee.email.toLowerCase() === query.toLowerCase())\n\t\t\t\t\tif (!alreadyInList) {\n\t\t\t\t\t\tmatches.unshift({\n\t\t\t\t\t\t\tcalendarUserType: 'INDIVIDUAL',\n\t\t\t\t\t\t\tcommonName: query,\n\t\t\t\t\t\t\temail: query,\n\t\t\t\t\t\t\tisUser: false,\n\t\t\t\t\t\t\tavatar: null,\n\t\t\t\t\t\t\tlanguage: null,\n\t\t\t\t\t\t\ttimezoneId: null,\n\t\t\t\t\t\t\thasMultipleEMails: false,\n\t\t\t\t\t\t\tdropdownName: query,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Generate a unique id for every result to make the avatar components reactive\n\t\t\t\tfor (const match of matches) {\n\t\t\t\t\tmatch.uid = randomId()\n\t\t\t\t}\n\n\t\t\t\tthis.isLoading = false\n\t\t\t\tthis.inputGiven = true\n\t\t\t} else {\n\t\t\t\tthis.inputGiven = false\n\t\t\t\tthis.isLoading = false\n\t\t\t}\n\n\t\t\tthis.matches = matches\n\t\t}, 500),\n\t\taddAttendee(selectedValue) {\n\n\t\t\tif (selectedValue.type === 'circle') {\n\t\t\t\tshowInfo(this.$t('calendar', 'Note that members of circles get invited but are not synced yet.'))\n\t\t\t\tthis.resolveCircleMembers(selectedValue.id, selectedValue.email)\n\t\t\t}\n\t\t\tif (selectedValue.type === 'contactsgroup') {\n\t\t\t\tshowInfo(this.$t('calendar', 'Note that members of contact groups get invited but are not synced yet.'))\n\t\t\t\tthis.getContactGroupMembers(selectedValue.commonName)\n\t\t\t\tconst group = {\n\t\t\t\t\tcalendarUserType: 'GROUP',\n\t\t\t\t\tcommonName: selectedValue.commonName,\n\t\t\t\t\tdropdownName: selectedValue.dropdownName,\n\t\t\t\t\temail: selectedValue.email,\n\t\t\t\t\tisUser: false,\n\t\t\t\t\tsubtitle: selectedValue.subtitle,\n\t\t\t\t\ttype: 'contactsgroup',\n\t\t\t\t}\n\t\t\t\tthis.$emit('add-attendee', group)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.$emit('add-attendee', selectedValue)\n\t\t},\n\t\tasync resolveCircleMembers(circleId, groupId) {\n\t\t\tlet results\n\t\t\ttry {\n\t\t\t\t// Going to query custom backend to fetch Circle members since we're going to use\n\t\t\t\t// mail addresses of local circle members. The Circles API doesn't expose member\n\t\t\t\t// emails yet. Change approved by @miaulalala and @ChristophWurst.\n\t\t\t\tresults = await circleGetMembers(circleId)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\treturn []\n\t\t\t}\n\t\t\tresults.data.forEach((member) => {\n\t\t\t\tif (!this.organizer || member.email !== this.organizer.uri) {\n\t\t\t\t\tthis.$emit('add-attendee', member)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tasync getContactGroupMembers(groupName) {\n\t\t\tlet results\n\t\t\ttry {\n\t\t\t\tresults = await HttpClient.post(linkTo('calendar', 'index.php') + '/v1/autocompletion/groupmembers', {\n\t\t\t\t\tgroupName,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Failed to fetch contact group members', error)\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tresults.data.forEach((member) => {\n\t\t\t\tif (!this.organizer || member.email !== this.organizer.uri) {\n\t\t\t\t\tthis.$emit('add-attendee', member)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tasync findAttendeesFromContactsAPI(query) {\n\t\t\tlet response\n\n\t\t\ttry {\n\t\t\t\tresponse = await HttpClient.post(linkTo('calendar', 'index.php') + '/v1/autocompletion/attendee', {\n\t\t\t\t\tsearch: query,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tconst data = response.data\n\t\t\treturn data.reduce((arr, result) => {\n\t\t\t\tconst hasMultipleEMails = result.emails.length > 1\n\n\t\t\t\tresult.emails.forEach((email) => {\n\t\t\t\t\tlet name\n\t\t\t\t\tif (result.name && !hasMultipleEMails) {\n\t\t\t\t\t\tname = result.name\n\t\t\t\t\t} else if (result.name && hasMultipleEMails) {\n\t\t\t\t\t\tname = `${result.name} (${email})`\n\t\t\t\t\t} else {\n\t\t\t\t\t\tname = email\n\t\t\t\t\t}\n\n\t\t\t\t\tif (email && this.alreadyInvitedEmails.includes(removeMailtoPrefix(email))) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tif (result.type === 'contactsgroup') {\n\t\t\t\t\t\tarr.push({\n\t\t\t\t\t\t\tcalendarUserType: 'GROUP',\n\t\t\t\t\t\t\tcommonName: result.name,\n\t\t\t\t\t\t\tsubtitle: this.$n('calendar', '%n member', '%n members', result.members),\n\t\t\t\t\t\t\tmembers: { length: result.members },\n\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\tisUser: false,\n\t\t\t\t\t\t\tavatar: result.photo,\n\t\t\t\t\t\t\tlanguage: result.lang,\n\t\t\t\t\t\t\ttimezoneId: result.tzid,\n\t\t\t\t\t\t\thasMultipleEMails: false,\n\t\t\t\t\t\t\tdropdownName: name,\n\t\t\t\t\t\t\ttype: 'contactsgroup',\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tcalendarUserType: 'INDIVIDUAL',\n\t\t\t\t\t\tcommonName: result.name,\n\t\t\t\t\t\temail,\n\t\t\t\t\t\tisUser: false,\n\t\t\t\t\t\tavatar: result.photo,\n\t\t\t\t\t\tlanguage: result.lang,\n\t\t\t\t\t\ttimezoneId: result.tzid,\n\t\t\t\t\t\thasMultipleEMails,\n\t\t\t\t\t\tdropdownName: name,\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t\treturn arr\n\t\t\t}, [])\n\t\t},\n\t\tasync findAttendeesFromDAV(query) {\n\t\t\tlet results\n\t\t\ttry {\n\t\t\t\tresults = await principalPropertySearchByDisplaynameOrEmail(query)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn results.filter((principal) => {\n\t\t\t\tif (!principal.email) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\tif (this.alreadyInvitedEmails.includes(principal.email)) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\t// Do not include resources and rooms\n\t\t\t\tif (['ROOM', 'RESOURCE'].includes(principal.calendarUserType)) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\treturn true\n\t\t\t}).map((principal) => {\n\t\t\t\treturn {\n\t\t\t\t\tcommonName: principal.displayname,\n\t\t\t\t\tcalendarUserType: principal.calendarUserType,\n\t\t\t\t\temail: principal.email,\n\t\t\t\t\tlanguage: principal.language,\n\t\t\t\t\tisUser: principal.calendarUserType === 'INDIVIDUAL',\n\t\t\t\t\tavatar: decodeURIComponent(principal.userId),\n\t\t\t\t\thasMultipleEMails: false,\n\t\t\t\t\tdropdownName: principal.displayname ? [principal.displayname, principal.email].join(' ') : principal.email,\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tasync findAttendeesFromCircles(query) {\n\t\t\tlet results\n\t\t\ttry {\n\t\t\t\tresults = await circleSearchByName(query)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn results.filter((circle) => {\n\t\t\t\treturn true\n\t\t\t}).map((circle) => {\n\t\t\t\treturn {\n\t\t\t\t\tcommonName: circle.displayname,\n\t\t\t\t\tcalendarUserType: 'GROUP',\n\t\t\t\t\temail: 'circle+' + circle.id + '@' + circle.instance,\n\t\t\t\t\tisUser: false,\n\t\t\t\t\tdropdownName: circle.displayname,\n\t\t\t\t\ttype: 'circle',\n\t\t\t\t\tid: circle.id,\n\t\t\t\t\tsubtitle: this.$n('calendar', '%n member', '%n members', circle.population),\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n:deep(.avatardiv) {\n\toverflow: visible !important;\n}\n</style>\n"],sourceRoot:""}]);const l=s},89595:(e,t,n)=>{var a={"./af.js":[25177,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-dz.js":[41488,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-kw.js":[58676,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-ly.js":[42353,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-ma.js":[24496,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-ps.js":[6947,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-sa.js":[82682,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar-tn.js":[67375,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ar.js":[61509,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./az.js":[95533,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./be.js":[28959,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bg.js":[47777,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bm.js":[54903,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bn-bd.js":[17357,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bn.js":[61290,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bo.js":[31545,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./br.js":[11470,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./bs.js":[44429,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ca.js":[7306,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./cs.js":[56464,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./cv.js":[73635,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./cy.js":[64226,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./da.js":[93601,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./de-at.js":[26111,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./de-ch.js":[54697,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./de.js":[77853,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./dv.js":[60708,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./el.js":[54691,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-au.js":[53872,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-ca.js":[28298,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-gb.js":[56195,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-ie.js":[66584,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-il.js":[65543,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-in.js":[9033,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-nz.js":[79402,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./en-sg.js":[43004,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./eo.js":[10553,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./es-do.js":[20838,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./es-mx.js":[17730,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./es-us.js":[56575,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./es.js":[97650,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./et.js":[3035,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./eu.js":[3508,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fa.js":[119,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fi.js":[90527,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fil.js":[95995,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fo.js":[52477,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fr-ca.js":[26435,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fr-ch.js":[37892,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fr.js":[85498,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./fy.js":[37071,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ga.js":[41734,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gd.js":[70217,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gl.js":[77329,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gom-deva.js":[32124,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gom-latn.js":[93383,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./gu.js":[95050,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./he.js":[11713,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./hi.js":[43861,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./hr.js":[26308,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./hu.js":[90609,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./hy-am.js":[17160,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./id.js":[74063,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./is.js":[89374,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./it-ch.js":[21827,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./it.js":[88383,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ja.js":[23827,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./jv.js":[89722,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ka.js":[41794,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./kk.js":[27088,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./km.js":[96870,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./kn.js":[84451,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ko.js":[63164,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ku-kmr.js":[6181,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ku.js":[98174,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ky.js":[78474,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./lb.js":[79680,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./lo.js":[15867,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./lt.js":[45766,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./lv.js":[69532,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./me.js":[58076,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mi.js":[41848,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mk.js":[30306,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ml.js":[73739,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mn.js":[99053,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mr.js":[86169,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ms-my.js":[92297,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ms.js":[73386,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./mt.js":[77075,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./my.js":[72264,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./nb.js":[22274,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ne.js":[8235,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./nl-be.js":[43784,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./nl.js":[92572,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./nn.js":[54566,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./oc-lnc.js":[69330,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./pa-in.js":[29849,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./pl.js":[94418,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./pt-br.js":[48303,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./pt.js":[79834,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ro.js":[24457,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ru.js":[4652,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sd.js":[1221,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./se.js":[33478,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./si.js":[17538,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sk.js":[5784,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sl.js":[46637,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sq.js":[86794,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sr-cyrl.js":[3322,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sr.js":[45719,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ss.js":[56e3,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sv.js":[41011,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./sw.js":[40748,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ta.js":[11025,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./te.js":[11885,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tet.js":[28861,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tg.js":[86571,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./th.js":[55802,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tk.js":[59527,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tl-ph.js":[29231,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tlh.js":[31052,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tr.js":[85096,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tzl.js":[79846,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tzm-latn.js":[97711,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./tzm.js":[81765,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ug-cn.js":[48414,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./uk.js":[16618,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./ur.js":[57777,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./uz-latn.js":[72475,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./uz.js":[57609,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./vi.js":[21135,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./x-pseudo.js":[64051,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./yo.js":[82218,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./zh-cn.js":[52648,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./zh-hk.js":[1632,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./zh-mo.js":[31541,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"],"./zh-tw.js":[50304,"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96","node_modules_moment_locale_sync_recursive_"]};function o(e){if(!n.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n.t(o,23)))}o.keys=()=>Object.keys(a),o.id=89595,e.exports=o},61424:(e,t,n)=>{"use strict";var a=n(85072),o=n.n(a),r=n(97825),s=n.n(r),l=n(77659),d=n.n(l),c=n(55056),i=n.n(c),m=n(10540),u=n.n(m),_=n(41113),p=n.n(_),h=n(15597),y={};y.styleTagTransform=p(),y.setAttributes=i(),y.insert=d().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=u();o()(h.A,y),h.A&&h.A.locals&&h.A.locals},44823:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(80500),o=n(86372);n(74899),n(69995);const r=(0,n(14486).A)(o.A,a.X,a.Y,!1,null,"248a12ad",null).exports},41975:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(91498),o=n(38700);n(9543);const r=(0,n(14486).A)(o.A,a.X,a.Y,!1,null,"74e170ef",null).exports},86372:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=n(27203).A},38700:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=n(63939).A},9543:(e,t,n)=>{"use strict";n(61424)},74899:(e,t,n)=>{"use strict";n(72656)},69995:(e,t,n)=>{"use strict";n(71160)},72656:(e,t,n)=>{var a=n(78363);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(70534).A)("39758310",a,!0,{})},71160:(e,t,n)=>{var a=n(62451);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(70534).A)("56dc5cfc",a,!0,{})}}]);
//# sourceMappingURL=calendar-src_utils_closestColor_js-src_utils_moment_js-src_utils_uidToColor_js-src_components_Editor_F-24b9af.js.map?v=744944fb1b4f3dfc2b3f